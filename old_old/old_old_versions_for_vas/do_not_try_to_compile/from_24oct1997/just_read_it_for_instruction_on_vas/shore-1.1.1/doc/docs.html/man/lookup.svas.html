<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:41:01 CST 1997 from file mansvas/lookup.svas -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
lookup(svas) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
lookup, _lookup- locating Shore objects by path name
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">ARGUMENTS</A>
</LI>
<LI>
<A HREF="#HRR.4">ENVIRONMENT</A>
</LI>
<LI>
<A HREF="#HRR.5">ERRORS</A>
</LI>
<LI>
<A HREF="#HRR.6">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.7">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.8">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.9">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
VASResult       shore_vas::lookup(
    const Path          pathname, 
    lrid_t              *result,
    PermOp              targetperm = Permissions::op_read,
    bool		errorIfNotFound = FALSE,
    bool		follow = FALSE
);

// server only:
VASResult       shore_vas::_lookup(
    const Path          pathname, 
    bool		*found,
    lrid_t              *result = 0,
    bool		errorIfNotFound = TRUE,
    PermOp              targetperm = Permissions::op_read,
    bool		follow = TRUE,
    serial_t            *file = 0
);

// server only:
VASResult       shore_vas::_lookup(
    lrid_t              &amp;dir, 
    const    Path       pathname,
    PermOp              pathperm,
    PermOp              targetperm,
    bool		*found,
    lrid_t              *result,
    serial_t            *file,
    bool		errorIfNotFound = TRUE,
    bool		follow = TRUE
);
</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>
The lookup methods
translate from path names to object identifiers.
(See
<A HREF="directory.svas.html"><STRONG>directory(svas)</STRONG></A>
for ways to translate object identifiers to path names.)
They do not affect the working directory.
They all check permissions along the path.
They can be used to follow or not to follow  symbolic links and 
cross references.
<HR>
<H1><A NAME="HRR.3">ARGUMENTS</A></H1>
 <em>Pathname</em>
is the Shore pathname to follow.
It may be absolute or relative.
In the first two methods, if it is relative, it is
relative to the current working directory.
In the third method, it is relative to the directory identified by 
 <em>dir.</em>
<P>
If an object with such a pathname exists,
its object identifier is returned in 
 <em>*result.</em>
If no such object exists, 
 <em>*result</em>
is unchanged.
<P>
If 
 <em>follow</em>
is TRUE, and the pathname encounters symbolic links or cross-references
along the way, they will be followed, otherwise the search will terminate
at the point at which a symbolic link  or cross-reference is found.
If the path name does not identify an object, and
 <em>errIfNotFound</em>
is TRUE, all forms of lookup issue an error message
and return ST_FAILURE.
If 
 <em>errIfNotFound</em>
if FALSE,
they are silent, but indicate that no such object was found as follows: 
 <strong>lookup</strong>
returns ST_FAILURE,
and both forms of 
 <strong>_lookup</strong>
return ST_OK.
 <strong>*Found,</strong>
where present, is set to
TRUE if such an object exists, and to FALSE if not.
<P>
At the end of the search, if an object is found,
it is checked for the permissions given in 
 <em>targetperm.</em>
Along the path, 
 <strong>lookup</strong>
and the first form of
 <strong>_lookup</strong>
require search (execute) permissions;
the second form of 
 <strong>_lookup</strong>
checks for the permissions indicated in 
 <em>pathperm.</em>
<P>
Both forms of
 <strong>_lookup</strong>
return the logical file identifier
for the Shore Storage Manager
<em>file</em>
in which the object resides.
In the first form, the file identifier
is returned only if
 <em>file</em>
is a non-null pointer.
<HR>
<H1><A NAME="HRR.4">ENVIRONMENT</A></H1>
 <strong>Lookup</strong>
is available in the client library and in the server; 
both forms of
 <strong>_lookup</strong>
are available only on the server.
<HR>
<H1><A NAME="HRR.5">ERRORS</A></H1>
<P>
Deadlocks can occur while locks are being acquired.  See
<A HREF="transaction.svas.html"><STRONG>transaction(svas)</STRONG></A> 
for information about deadlocks.
<P>
A complete list of errors is in
<A HREF="errors.svas.html"><STRONG>errors(svas)</STRONG></A>.
<HR>
<H1><A NAME="HRR.6">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.7">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.8">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.9">SEE ALSO</A></H1>
<A HREF="errors.svas.html"><STRONG>errors(svas)</STRONG></A>,
<A HREF="directory.svas.html"><STRONG>directory(svas)</STRONG></A>,
<A HREF="file_system.svas.html"><STRONG>file_system(svas)</STRONG></A>,
<A HREF="registered.svas.html"><STRONG>registered(svas)</STRONG></A>,
and
<A HREF="transaction.svas.html"><STRONG>transaction(svas)</STRONG></A>
</BODY>
</HTML>
