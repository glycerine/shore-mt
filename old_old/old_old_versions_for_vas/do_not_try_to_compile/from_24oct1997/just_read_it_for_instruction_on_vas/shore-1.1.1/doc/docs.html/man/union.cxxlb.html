<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:40:54 CST 1997 from file mancxxlb/union.cxxlb -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
union(cxxlb) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
union - union attributes 
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">LANGUAGE BINDING</A>
</LI>
<LI>
<A HREF="#HRR.3">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.4">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.5">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.6">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.7">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
// in sdl:

interface a; // forward
enum enumx { one,two,three,four,five,six };

union union_t switch (enumx tag) {
	case one:       int       u_integer;
	case two:       boolean   u_boolean;
	case three:     set&lt;a&gt;  u_set;
	case four:      ref&lt;a&gt;  u_ref;
	case five:      string    u_string;
};


interface my_obj {
public:
	attribute union_t _u;
};
</PRE></BLOCKQUOTE>

<HR>
<H1><A NAME="HRR.2">LANGUAGE BINDING</A></H1>
<BLOCKQUOTE><PRE>

struct union_t :
sdl_heap_base {
    union_t(); 
    union_t(const union_t &amp; arg);
    const union_t &amp; operator = (const union_t &amp; );
    const  enum enumx tag ;

    void set_utag( enum enumx  _tg_val );
    void set_tag( enum enumx  _tg_val );

    enum enumx  get_utag() const ;
    enum enumx  get_tag() ;

    long    &amp;set_u_integer() ;
    const  long   &amp; get_u_integer() const ;

    boolean   &amp; set_u_boolean() ;
    const  boolean   &amp; get_u_boolean() const ;

    Set &lt; Ref &lt; a  &gt;   &gt;    &amp;set_u_set() ;
    const  Set &lt; Ref &lt; a  &gt;   &gt;    &amp;get_u_set() const ;

    Ref &lt; a  &gt;    &amp;set_u_ref() ;
    const  Ref &lt; a  &gt;    &amp;get_u_ref() const ;

    sdl_string   &amp; set_u_string() ;
    const sdl_string   &amp; get_u_string() const ;
};
</PRE></BLOCKQUOTE>

<HR>
<H1><A NAME="HRR.3">DESCRIPTION</A></H1>
<P>
Unions declared in SDL result in tagged unions
in the C++ language binding: a tag value and a
union construct.
The language binding for a union attribute
contains methods for setting and reading the tag value,
and a corresponding pair of methods for each arm of the union.
<P>
It is the responsibility of the application program
to set the tag properly 
<strong>before</strong>
setting the value of the union:
<BLOCKQUOTE><PRE>
	o.update()-&gt;set_tag(one);
	o.update()-&gt;set_u_integer() = 1;
</PRE></BLOCKQUOTE>
If the tag is incorrect, the 
 <strong>set_xxx()</strong>
and 
 <strong>get_xxx()</strong>
methods will fail an assertion, e.g.:
<BLOCKQUOTE><PRE>
	o.update()-&gt;set_tag(three); // should be &quot;one&quot;
	o.update()-&gt;set_u_integer() = 1;
</PRE></BLOCKQUOTE>
yields
<BLOCKQUOTE><PRE>
union.h:60: failed assertion `_armi()==0'
</PRE></BLOCKQUOTE>
(The values the the method 
 <strong>_armi()</strong>
returns are not the tag's
enumeration values.)
<HR>
<H1><A NAME="HRR.4">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.5">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.6">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.7">SEE ALSO</A></H1>
<A HREF="intro.cxxlb.html"><STRONG>intro(cxxlb)</STRONG></A>,
<A HREF="intro.oc.html"><STRONG>intro(oc)</STRONG></A>,
<A HREF="method.cxxlb.html"><STRONG>method(cxxlb)</STRONG></A>,
<A HREF="index.cxxlb.html"><STRONG>index(cxxlb)</STRONG></A>,
<A HREF="ref.cxxlb.html"><STRONG>ref(cxxlb)</STRONG></A>,
<A HREF="set.cxxlb.html"><STRONG>set(cxxlb)</STRONG></A>,
and the 
<A HREF="../sdlman/sdlman.html">Shore Data Language Reference Manual</A>
</BODY>
</HTML>
