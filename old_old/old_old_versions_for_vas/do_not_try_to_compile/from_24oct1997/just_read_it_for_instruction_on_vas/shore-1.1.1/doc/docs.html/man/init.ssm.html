<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:41:07 CST 1997 from file manssm/init.ssm -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
ss_m::init(ssm) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
ss_m, set_shutdown_flag, setup_options - Class ss_m Methods for Initialization

</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">ERRORS</A>
</LI>
<LI>
<A HREF="#HRR.4">EXAMPLES</A>
</LI>
<LI>
<A HREF="#HRR.5">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.6">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.7">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.8">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
#include &lt;sm_vas.h&gt;  

class ss_m;

static void	ss_m::set_shutdown_flag(bool clean);
		ss_m::ss_m();

static rc_t	ss_m::setup_options(option_group_t*);
		ss_m::~ss_m();

</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>

These methods of class
 <em>ss_m</em>
control initializing and shutting down the
Shore storage manager (SSM).
Constructing an
instance of
 <em>ss_m</em>
starts the SSM.  Destroying the instance causes the SSM to shut down.

During construction, the SSM follows the steps discussed in the Recovery section of
<A HREF="../ssmapi/ssmapi.html">The Shore Storage Manager Programming Interface.</A>

<P>
 <strong>setup_options(option_group_t *)</strong>
<DL>
<PP>
The
 <strong>setup_options</strong>
method adds storage manager specific options to the
 <em>option_group_t.</em>
These options must be initialized before the
 <strong>ss_m</strong>
constructor is called.

<P>
</DL>
 <strong>ss_m()</strong>
<DL>
<PP>
The
 <strong>ss_m</strong>
constructor initializes all SSM data structures, and performs
recovery based on the current log.  Only one instance of
 <strong>ss_m</strong>
may be in existence at any one time (this is enforced by the
constructor).

<P>
</DL>
Part of SSM initialization includes allocating a buffer pool. 
The buffer pool is located in shared memory, so the operating system must
have shared-memory support to accommodate the size of the buffer pool.
If insufficient shared memory is available, the SSM prints a message
indicating how much shared memory it is trying to acquire, and exits.

<P>
 <strong>set_shutdown_flag(clean)</strong>
<DL>
<PP>
The
 <strong>set_shutdown_flag</strong>
method can be used to simulate a crash.
If
 <em>clean</em>
is set to
<strong>false,</strong>
the SSM will not flush any buffers when 
 <strong>~ss_m()</strong>
is called.
If
 <em>clean</em>
is set to
<strong>true,</strong>
all data pages and logs are flushed to disk, and
no recovery processing will be needed when the SSM is restarted.
This is the normal operation of the storage manager.

<P>
</DL>
 <strong>~ss_m()</strong>
<DL>
<PP>
The
 <strong>ss_m</strong>
destructor flushes all buffers in the buffer pool to disk (unless
 <strong>set_shutdown_flag(clean)</strong>
was used to defeat this)
and frees all the resources used by the SSM.

</DL>
<HR>
<H1><A NAME="HRR.3">ERRORS</A></H1>

Failure to properly construct/destruct the SSM will
result in a
<strong>fatal</strong>
error that will print a message and exit the program.

<P>
See
<A HREF="errors.ssm.html"><STRONG>errors(ssm)</STRONG></A>
for more information on error-handling.

<HR>
<H1><A NAME="HRR.4">EXAMPLES</A></H1>
To Do.

<HR>
<H1><A NAME="HRR.5">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.6">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.7">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.8">SEE ALSO</A></H1>
<A HREF="intro.ssm.html"><STRONG>intro(ssm)</STRONG></A>,
<A HREF="volume.ssm.html"><STRONG>volume(ssm)</STRONG></A>,
<A HREF="options.common.html"><STRONG>options(common)</STRONG></A>,
<A HREF="transaction.ssm.html"><STRONG>transaction(ssm)</STRONG></A>

</BODY>
</HTML>
