<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:41:01 CST 1997 from file mansvas/lockObj.svas -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
lockobj(svas) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
lockObj - lock a Shore object
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">ARGUMENTS</A>
</LI>
<LI>
<A HREF="#HRR.4">ENVIRONMENT</A>
</LI>
<LI>
<A HREF="#HRR.5">ERRORS</A>
</LI>
<LI>
<A HREF="#HRR.6">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.7">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.8">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.9">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
enum LockMode { NL=0,IS=1,IX=2,S=3,SIX=4,U=5,X=6 };

VASResult shore_vas::lockObj(
            const  lrid_t     &amp;obj,     
            LockMode          lock,     
            RequestMode       blockmode = Blocking
        );    
</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>
 <strong>LockObj</strong>
locks an object without bringing it into the caller's address space.
<HR>
<H1><A NAME="HRR.3">ARGUMENTS</A></H1>
The argument
 <em>obj</em>
is the full logical object identifier of the object to be locked.
<P>
The argument
 <em>lock</em>
takes one of the values
<BLOCKQUOTE><PRE>
    enum LockMode { NL=0,IS=1,IX=2,S=3,SIX=4,U=5,X=6 },
</PRE></BLOCKQUOTE>
which indicates what kind of a lock the SVAS will acquire
when the object is read.
A value of NL has no effect. 
If the object is already locked at some level, the lock is 
upgraded if appropriate.
<P>
The argument
 <em>blockmode</em>
takes a value from the enumeration
<BLOCKQUOTE><PRE>
    enum RequestMode    { NonBlocking=0, Blocking = 1 };

</PRE></BLOCKQUOTE>
The default value is Blocking, in which case the
call to 
 <strong>lockObj</strong>
does not return until the lock is acquired or
a deadlock occurs.
<strong>Nonblocking lock requests are not implemented to date.</strong>
<HR>
<H1><A NAME="HRR.4">ENVIRONMENT</A></H1>
 <strong>LockObj</strong>
is available
on both the server and clients.
<P>
 <strong>LockObj</strong>
must be called when a transaction is active.
<HR>
<H1><A NAME="HRR.5">ERRORS</A></H1>
<P>
Deadlocks can occur while locks are being acquired.  See
<A HREF="transaction.svas.html"><STRONG>transaction(svas)</STRONG></A> 
for information about deadlocks.
<P>
A complete list of errors is in
<A HREF="errors.svas.html">errors(svas).</A>
<HR>
<H1><A NAME="HRR.6">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.7">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.8">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.9">SEE ALSO</A></H1>
<A HREF="readObj.svas.html"><STRONG>readObj(svas)</STRONG></A>,
<A HREF="transaction.svas.html"><STRONG>transaction(svas)</STRONG></A>,
and
<A HREF="errors.svas.html"><STRONG>errors(svas)</STRONG></A>.
</BODY>
</HTML>
