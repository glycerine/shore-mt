<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:41:00 CST 1997 from file mansvas/getdirentries.svas -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
getdirentries(svas) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
getDirEntries - reading Shore directories
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">ARGUMENTS</A>
</LI>
<LI>
<A HREF="#HRR.4">DIRECTORY ENTRIES</A>
</LI>
<LI>
<A HREF="#HRR.5">ENVIRONMENT</A>
</LI>
<LI>
<A HREF="#HRR.6">ERRORS</A>
</LI>
<LI>
<A HREF="#HRR.7">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.8">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.9">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.10">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
const NoSuchCookie;
const TerminalCookie;

VASResult
shore_vas::getDirEntries(
    const    lrid_t     &amp;dir,
    char                *rb,
    ObjectSize          bufbytes,  
    int                 *nresults,
    Cookie              *cookie       
);

</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>
<P>
 <strong>GetDirEntries</strong>
writes sets of directory entries into a caller-provided buffer.
<HR>
<H1><A NAME="HRR.3">ARGUMENTS</A></H1>
 <em>Dir</em>
identifies the directory object of interest.
 <em>Rb</em>
is points to the caller's buffer.
 <em>Bufbytes</em>
is the size of the buffer, in bytes.
 <em>Nresults</em>
is a pointer to an integer in the caller's data area,
into which the SVAS writes the number of complete entries 
that were placed in the buffer.
 <em>Cookie</em>
is a pointer to an opaque value that
the SVAS places in the caller's data area, and which
is used by the SVAS to maintain state between calls to
 <strong>getDirEntries.</strong>
The caller must set the initial value of
 <em>*cookie</em>
(on the first call) to 
 <em>NoSuchCookie.</em>
<P>
 <em>TerminalCookie</em>
is returned when the last entry has been returned.
Thus, 
there are no more entries to process when
<tt>*nresults == 0</tt>
and
<tt>*cookie == TerminalCookie.</tt>
<HR>
<H1><A NAME="HRR.4">DIRECTORY ENTRIES</A></H1>
<P>
A directory entry is a 5-tuple:
<DL>
<DT>opaque</DT><DD>
Four bytes of opaque data.
</DD>
<DT>serial</DT><DD>
A serial number, which is Shore's analog of an i-node number.
</DD>
<DT>integer</DT><DD>
The length, in bytes, of the entry.
</DD>
<DT>integer</DT><DD>
The length, in bytes, of the name.
</DD>
<DT>name</DT><DD>
A sequence of characters that constitute the name of the directory entry.
<P>
</DD>
</DL>
All entries are 8-byte aligned when placed in the caller's buffer.
<HR>
<H1><A NAME="HRR.5">ENVIRONMENT</A></H1>
 <strong>GetDirEntries</strong>
is available on 
on the server and in the client library.
The method 
acquires locks,
so it must be run in transactions.
<HR>
<H1><A NAME="HRR.6">ERRORS</A></H1>
<P>
Deadlocks can occur while locks are being acquired.  See
<A HREF="transaction.svas.html"><STRONG>transaction(svas)</STRONG></A> 
for information about deadlocks.
<P>
A complete list of errors is in
<A HREF="errors.svas.html"><STRONG>errors(svas)</STRONG></A>.
<HR>
<H1><A NAME="HRR.7">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.8">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.9">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.10">SEE ALSO</A></H1>
<A HREF="directory.svas.html"><STRONG>directory(svas)</STRONG></A>,
<A HREF="lookup.svas.html"><STRONG>lookup(svas)</STRONG></A>,
<A HREF="transaction.svas.html"><STRONG>transaction(svas)</STRONG></A>,
<A HREF="lockObj.svas.html"><STRONG>lockObj(svas)</STRONG></A>,
<A HREF="errors.svas.html"><STRONG>errors(svas)</STRONG></A>,
and
<A HREF="text.svas.html"><STRONG>text(svas)</STRONG></A>.
</BODY>
</HTML>
