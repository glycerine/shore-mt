<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:40:57 CST 1997 from file manoc/statistics.oc -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
stats(oc) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
stats - application statistics gathering
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">OBJECT CACHE STATISTICS</A>
</LI>
<LI>
<A HREF="#HRR.4">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.5">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.6">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.7">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
#include &lt;ShoreApp.h&gt;
#include &lt;ShoreStats.h&gt;
class w_statistics_t;  // forward;
	// defined in &lt;w_statistics.h&gt;, included by &lt;ShoreApp.h&gt;

static shrc Shore::gather_stats(w_statistics_t &amp;, bool remote=false);
void Shore::clear_stats();
</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>
<P>
These methods are the interface to a statistics-gathering facility 
that application programmers may find useful for debugging 
or performance-tuning purposes.
The statistics are gathered with 
 <strong>gather_stats.</strong>
Each statistic kept has a name and a 
manifest constant of that name 
for use with the generic statistics-gathering
programming interface described in 
<A HREF="statistics.fc.html"><STRONG>statistics(fc)</STRONG></A>.
The names and descriptions of the statistics are listed
in sections below.
<P>
 <strong>Gather_stats</strong>
fills in the 
 <em>w_statistics_t</em>
structure with the
current local or remote statistics.
Local and remote statistics are maintained
at all the levels of the Shore software. 
There is no single data structure 
that contains all the statistics at all the layers.
The 
 <em>w_statistics_t</em>class<em>is</em>used<em>to</em>
hold the statistics in a generic form, which,
for each statistic, includes a description
of the statistics (a character string), a value
for the statistic (integer, unsigned integer, or
floating point number), and a manifest constant
for identifying the statistic.
Details about programming with the 
 <em>w_statistics_t</em>
class are in 
<A HREF="statistics.fc.html"><STRONG>statistics(fc)</STRONG></A>.

 <strong>Clear_stats</strong>
resets the statistics to zero.
If the Object cache option
 <strong>oc_pstats</strong>
has the value 
<strong>true</strong>
or 
<strong>yes,</strong>
the statistics are gathered, printed, and cleared
each time a transaction is committed or aborted.
<P>
 <strong>Shore::init</strong>
(see
<A HREF="init.oc.html"><STRONG>init(oc)</STRONG></A>
)
initializes the local statistics to zero.  
<HR>
<H1><A NAME="HRR.3">OBJECT CACHE STATISTICS</A></H1>
<P>
The Object Cache maintains the following statistics,
identified by their manifest constants (which 
are defined in &lt;ShoreStats.h&gt;).
<DL>
<DT>OCSTAT_anoncreates</DT><DD>
the number of anonymous objects created
</DD>
<DT>OCSTAT_regcreates</DT><DD>
the number of registered objects created
</DD>
<DT>OCSTAT_otentries</DT><DD>
The number of objects about which the
the object cache has any information. 
</DD>
<DT>OCSTAT_ncached</DT><DD>
The number of objects fetched into the object cache.
If pre-fetching is in effect, this can be more than
the number of objects actually used by the application.
</DD>
<DT>OCSTAT_nbytes</DT><DD>
the number of bytes fetched into the object cache. 
</DD>
<DT>OCSTAT_nupdates</DT><DD>
The number of times a reference to an
object was made writable so that
an non-const method could be called.
</DD>
<DT>OCSTAT_ndestroys</DT><DD>
The number of objects destroyed.
</DD>
<DT>OCSTAT_total_pins</DT><DD>
The number of times objects were pinned
(a reference to an object was followed).
</DD>
<DT>OCSTAT_total_unpins</DT><DD>
The number of times objects were unpinned
(a reference to an object went out of scope).
</DD>
<DT>OCSTAT_mem_limit</DT><DD>
The memory limit imposed on the object cache
by the user through options.  
</DD>
<DT>OCSTAT_mem_used</DT><DD>
The amount of memory used for caching objects (does not include the
memory used for managing the object cache) at the time the
statistics are gathered.
</DD>
<DT>OCSTAT_obj_used</DT><DD>
The number of objects cached at the time the statistics are gathered.
</DD>
<DT>OCSTAT_extern_mem</DT><DD>
The amount of memory used for caching objects
that wouldn't fit in the cache (whose size
is determined by OCSTAT_mem_limit) after
replacing objects.
This number does not include the memory used for managing the
object cache.
</DD>
<DT>OCSTAT_extern_obj</DT><DD>
The number of objects that would not fit
in the cache (whose size is determined by OCSTAT_mem_limit)
after replacing objects.
<P>
</DD>
</DL>
The Shore Value-Added Server statistics are also
gathered.  They are described in
<A HREF="statistics.svas.html"><STRONG>statistics(svas)</STRONG></A>.
Unix resource-usage statistics are also gathered.
They are describe in
<strong>getrusage(2).</strong>
<P>
If the flag
 <em>remote</em>
is false on a call to 
 <strong>gather_stats,</strong>
only the statistics for the client process are gathered.
If the value of 
 <em>remote</em>
is true,
statistics are gathered from the server instead.
Remote statistics compose a collection of statistics
gathered from 13 different software modules within
the Shore server.
They are not described in detail anywhere,
but many of the statistics are self-describing
when printed.
<HR>
<H1><A NAME="HRR.4">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.5">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.6">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.7">SEE ALSO</A></H1>
<A HREF="statistics.svas.html"><STRONG>statistics(svas)</STRONG></A>,
<A HREF="statistics.fc.html"><STRONG>statistics(fc)</STRONG></A>,
and
<A HREF="options.oc.html"><STRONG>options(oc)</STRONG></A>.
</BODY>
</HTML>
