<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Shore Storage Manager: lockid_t Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="../../modules.html"><span>Modules</span></a></li>
    <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="../../classes.html"><span>Classes</span></a></li>
    <li><a href="../../files.html"><span>Files</span></a></li>
    <li><a href="../../dirs.html"><span>Directories</span></a></li>
    <li><a href="../../pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="../../examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="../../classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="../../hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>lockid_t Class Reference</h1><!-- doxytag: class="lockid_t" -->Collaboration diagram for lockid_t:<p><center><img src="../../d6/d7f/classlockid__t__coll__graph.png" border="0" usemap="#dd/d81/lockid__t__coll__map" alt="Collaboration graph"></center>
<map name="dd/d81/lockid__t__coll__map">
<area href="../../dc/d6c/classw__hashing_1_1uhash.html" shape="rect" coords="5,5,144,32" alt="">
</map>
<center><font size="2">[<a target="top" href="../../graph_legend.html">legend</a>]</font></center><a href="../../d0/d52/classlockid__t-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
The means of identifying a desired or held lock. 
<p>
Lock manager requests (acquire, release, query) take an argument of this kind to identify the entity to be locked. Not all lockids refer to anything extant.<p>
The structure of the <a class="el" href="../../d0/d34/classlockid__t.html">lockid_t</a> is such that several entity types are inferred, and the <a class="el" href="../../d0/d34/classlockid__t.html">lockid_t</a> has constructors from these entities' identifier classes, as well as methods to modify the lockid while retaining its inferred-entity type. The enumerator type name_space_t identifies the entity type of the lock_id, and is returned by the method space:<p>
<ul>
<li>t_vol :<ul>
<li>volume lock</li><li>no parent in hierarchy</li><li>constructed from <a class="el" href="../../d3/d3f/structvid__t.html">vid_t</a></li><li>can extract <a class="el" href="../../d3/d3f/structvid__t.html">vid_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#0a9a11c6da5f478cc3ff3d3720c7ce2e">vid()</a></li></ul>
</li></ul>
<p>
<ul>
<li>t_store :<ul>
<li>store lock (file lock, index lock)</li><li>parent in hierarchy is volume lock</li><li>constructed from <a class="el" href="../../da/d5b/structstid__t.html">stid_t</a></li><li>can extract snum_t with <a class="el" href="../../d0/d34/classlockid__t.html#cfc152e4ef43f446371e33fc716dad74">store()</a> and <a class="el" href="../../d3/d3f/structvid__t.html">vid_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#0a9a11c6da5f478cc3ff3d3720c7ce2e">vid()</a></li><li>can extract stid with <a class="el" href="../../d0/d34/classlockid__t.html#b3249fc63b18228734847aab1ea5fd0e">extract_stid()</a></li></ul>
</li></ul>
<p>
<ul>
<li>t_page :<ul>
<li>page lock</li><li>parent in hierarchy is store lock</li><li>constructed from <a class="el" href="../../d5/d47/classlpid__t.html">lpid_t</a></li><li>can extract shpid_t with <a class="el" href="../../d0/d34/classlockid__t.html#97af6b77d456ac99c76c004721cf9806">page()</a>, snum_t with <a class="el" href="../../d0/d34/classlockid__t.html#cfc152e4ef43f446371e33fc716dad74">store()</a> and <a class="el" href="../../d3/d3f/structvid__t.html">vid_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#0a9a11c6da5f478cc3ff3d3720c7ce2e">vid()</a></li><li>can extract stid with <a class="el" href="../../d0/d34/classlockid__t.html#b3249fc63b18228734847aab1ea5fd0e">extract_stid()</a></li><li>can extract lpid with <a class="el" href="../../d0/d34/classlockid__t.html#ae424a3d85853ece7d7aaabb72ea2b8d">extract_lpid()</a></li></ul>
</li></ul>
<p>
<ul>
<li>t_kvl :<ul>
<li>key-value lock</li><li>parent in hierarchy is store lock</li><li>constructed from <a class="el" href="../../d9/dbd/structkvl__t.html">kvl_t</a> (which is constructed from a <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> : see vec_t::make_kvl)</li><li>can extract <a class="el" href="../../d9/dbd/structkvl__t.html">kvl_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#dee2ec1336ef1cc7b72a0e70e6dcd66f">extract_kvl()</a></li><li>can extract snum_t with <a class="el" href="../../d0/d34/classlockid__t.html#cfc152e4ef43f446371e33fc716dad74">store()</a> and <a class="el" href="../../d3/d3f/structvid__t.html">vid_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#0a9a11c6da5f478cc3ff3d3720c7ce2e">vid()</a></li><li>can extract stid with <a class="el" href="../../d0/d34/classlockid__t.html#b3249fc63b18228734847aab1ea5fd0e">extract_stid()</a></li></ul>
</li></ul>
<p>
<ul>
<li>t_record :<ul>
<li>lock on record in file</li><li>parent in hierarchy is page lock</li><li>constructed from <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a></li><li>can extract slotid_t with <a class="el" href="../../d0/d34/classlockid__t.html#1d28487aaef5307aa5c12f330759acaa">slot()</a>, shpid_t with <a class="el" href="../../d0/d34/classlockid__t.html#97af6b77d456ac99c76c004721cf9806">page()</a>, snum_t with <a class="el" href="../../d0/d34/classlockid__t.html#cfc152e4ef43f446371e33fc716dad74">store()</a> and <a class="el" href="../../d3/d3f/structvid__t.html">vid_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#0a9a11c6da5f478cc3ff3d3720c7ce2e">vid()</a></li><li>can extract <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#03b2f9b270d7423216435d1bdeaed552">extract_rid()</a></li><li>can extract stid with <a class="el" href="../../d0/d34/classlockid__t.html#b3249fc63b18228734847aab1ea5fd0e">extract_stid()</a></li><li>can extract lpid with <a class="el" href="../../d0/d34/classlockid__t.html#ae424a3d85853ece7d7aaabb72ea2b8d">extract_lpid()</a></li></ul>
</li></ul>
<p>
<ul>
<li>t_extent :<ul>
<li>lock on extent</li><li>not in a hierarchy</li><li>constructed from <a class="el" href="../../d0/d87/classextid__t.html">extid_t</a></li><li>can extract extnum_t with <a class="el" href="../../d0/d34/classlockid__t.html#c56b20fd55d606fd616e83a6b5590926">extent()</a></li><li>can extract <a class="el" href="../../d0/d87/classextid__t.html">extid_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#7e2ca5b5ec96ae43678c776df022618b">extract_extent()</a></li></ul>
</li></ul>
<p>
<ul>
<li>t_user1 :<ul>
<li>lock on user-defined entity 1</li><li>not in a hierarchy</li><li>constructed from <a class="el" href="../../d3/d65/structlockid__t_1_1user1__t.html">user1_t</a></li><li>can extract <a class="el" href="../../d3/d65/structlockid__t_1_1user1__t.html">user1_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#fd9c04115c8340b282461cdd1fa9b277">extract_user1()</a></li></ul>
</li></ul>
<p>
<ul>
<li>t_user2 :<ul>
<li>lock on user-defined entity 2</li><li>parent in hierarchy is user-defined entity 1</li><li>constructed from <a class="el" href="../../d6/d0f/structlockid__t_1_1user2__t.html">user2_t</a></li><li>can extract <a class="el" href="../../d6/d0f/structlockid__t_1_1user2__t.html">user2_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#d297a40d6efafc0680df57b7ea400580">extract_user2()</a></li><li>can extract <a class="el" href="../../d3/d65/structlockid__t_1_1user1__t.html">user1_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#fd9c04115c8340b282461cdd1fa9b277">extract_user1()</a></li></ul>
</li></ul>
<p>
<ul>
<li>t_user3 :<ul>
<li>lock on user-defined entity 3</li><li>parent in hierarchy is user-defined entity 2</li><li>constructed from <a class="el" href="../../d2/d2b/structlockid__t_1_1user3__t.html">user3_t</a></li><li>can extract <a class="el" href="../../d2/d2b/structlockid__t_1_1user3__t.html">user3_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#9746d4d6e3e8b0043722fc2800ee7a3d">extract_user3()</a></li><li>can extract <a class="el" href="../../d6/d0f/structlockid__t_1_1user2__t.html">user2_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#d297a40d6efafc0680df57b7ea400580">extract_user2()</a></li><li>can extract <a class="el" href="../../d3/d65/structlockid__t_1_1user1__t.html">user1_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#fd9c04115c8340b282461cdd1fa9b277">extract_user1()</a></li></ul>
</li></ul>
<p>
<ul>
<li>t_user4 :<ul>
<li>lock on user-defined entity 4</li><li>parent in hierarchy is user-defined entity 3</li><li>constructed from <a class="el" href="../../d0/d6b/structlockid__t_1_1user4__t.html">user4_t</a></li><li>can extract <a class="el" href="../../d0/d6b/structlockid__t_1_1user4__t.html">user4_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#ed3401a473c59b1b94dc52dda8e02d3e">extract_user4()</a></li><li>can extract <a class="el" href="../../d2/d2b/structlockid__t_1_1user3__t.html">user3_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#9746d4d6e3e8b0043722fc2800ee7a3d">extract_user3()</a></li><li>can extract <a class="el" href="../../d6/d0f/structlockid__t_1_1user2__t.html">user2_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#d297a40d6efafc0680df57b7ea400580">extract_user2()</a></li><li>can extract <a class="el" href="../../d3/d65/structlockid__t_1_1user1__t.html">user1_t</a> with <a class="el" href="../../d0/d34/classlockid__t.html#fd9c04115c8340b282461cdd1fa9b277">extract_user1()</a></li></ul>
</li></ul>
<p>
<dl compact><dt><b>Attention:</b></dt><dd>The enumeration values of name_space_t have functional significance; they are use to compute parents in the hierarchy, so modify them with care!</dd></dl>
The user-defined entity types are for use by a server; they offer a hierarchy. <dl compact><dt><b>Examples: </b></dt><dd>

<p>
<a class="el" href="../../da/d22/lockid__test_8cpp-example.html#_a76">lockid_test.cpp</a>.</dl>
<p>

<p>
Definition at line <a class="el" href="../../d1/d8e/lock__s_8h-source.html#l00213">213</a> of file <a class="el" href="../../d1/d8e/lock__s_8h-source.html">lock_s.h</a>.<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Types</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9aba213e27580969320bfa125aa905d3"></a><!-- doxytag: member="lockid_t::page_bits_t" ref="9aba213e27580969320bfa125aa905d3" args="" -->
typedef uint4_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#9aba213e27580969320bfa125aa905d3">page_bits_t</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#089158c8aab5455a9d514f13ee9f285f">name_space_t</a> </td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top">enum &nbsp;</td><td class="memItemRight" valign="bottom"></td></tr>

<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8ec57f69914fda85901ae7b40b74a737"></a><!-- doxytag: member="lockid_t::operator&lt;" ref="8ec57f69914fda85901ae7b40b74a737" args="(lockid_t const &amp;p) const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#8ec57f69914fda85901ae7b40b74a737">operator&lt;</a> (<a class="el" href="../../d0/d34/classlockid__t.html">lockid_t</a> const &amp;p) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">comparison operator for <a class="el" href="../../d0/d34/classlockid__t.html">lockid_t</a>, used by lock manager <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="03c3923dac4f444f8429721d887f4fb6"></a><!-- doxytag: member="lockid_t::operator==" ref="03c3923dac4f444f8429721d887f4fb6" args="(const lockid_t &amp;p) const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#03c3923dac4f444f8429721d887f4fb6">operator==</a> (const <a class="el" href="../../d0/d34/classlockid__t.html">lockid_t</a> &amp;p) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">equality operator for <a class="el" href="../../d0/d34/classlockid__t.html">lockid_t</a> <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4b6fd9c7651902e4d160a40f5ecb45a7"></a><!-- doxytag: member="lockid_t::operator!=" ref="4b6fd9c7651902e4d160a40f5ecb45a7" args="(const lockid_t &amp;p) const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#4b6fd9c7651902e4d160a40f5ecb45a7">operator!=</a> (const <a class="el" href="../../d0/d34/classlockid__t.html">lockid_t</a> &amp;p) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">inequality operator for <a class="el" href="../../d0/d34/classlockid__t.html">lockid_t</a> <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="5553d22a7fb1284678e1e2f7cec5beaf"></a><!-- doxytag: member="lockid_t::hash" ref="5553d22a7fb1284678e1e2f7cec5beaf" args="() const " -->
uint4_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#5553d22a7fb1284678e1e2f7cec5beaf">hash</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Used by lock cache. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="baf34a677090891eee3f481242ecbf8a"></a><!-- doxytag: member="lockid_t::zero" ref="baf34a677090891eee3f481242ecbf8a" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#baf34a677090891eee3f481242ecbf8a">zero</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">clear out the lockid - initialize to mean nothing <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a7925af39b3633e094635b1bd1bcfb12"></a><!-- doxytag: member="lockid_t::lspace" ref="a7925af39b3633e094635b1bd1bcfb12" args="() const " -->
<a class="el" href="../../d0/d34/classlockid__t.html#089158c8aab5455a9d514f13ee9f285f">name_space_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#a7925af39b3633e094635b1bd1bcfb12">lspace</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">return the kind of entity this describes <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0a9a11c6da5f478cc3ff3d3720c7ce2e"></a><!-- doxytag: member="lockid_t::vid" ref="0a9a11c6da5f478cc3ff3d3720c7ce2e" args="() const " -->
<a class="el" href="../../d3/d3f/structvid__t.html">vid_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#0a9a11c6da5f478cc3ff3d3720c7ce2e">vid</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract volume id lockid whose <a class="el" href="../../d0/d34/classlockid__t.html#a7925af39b3633e094635b1bd1bcfb12">lspace()</a> == t_vol or has parent with <a class="el" href="../../d0/d34/classlockid__t.html#a7925af39b3633e094635b1bd1bcfb12">lspace()</a> == t_vol <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="cfc152e4ef43f446371e33fc716dad74"></a><!-- doxytag: member="lockid_t::store" ref="cfc152e4ef43f446371e33fc716dad74" args="() const " -->
const <a class="el" href="../../d3/dc7/group___i_d_s.html#g10c5a5843330e5c585b0527169f25029">snum_t</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#cfc152e4ef43f446371e33fc716dad74">store</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract store number lockid whose <a class="el" href="../../d0/d34/classlockid__t.html#a7925af39b3633e094635b1bd1bcfb12">lspace()</a> == t_store or has parent with <a class="el" href="../../d0/d34/classlockid__t.html#a7925af39b3633e094635b1bd1bcfb12">lspace()</a> == t_store <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="c56b20fd55d606fd616e83a6b5590926"></a><!-- doxytag: member="lockid_t::extent" ref="c56b20fd55d606fd616e83a6b5590926" args="() const " -->
const <a class="el" href="../../d3/dc7/group___i_d_s.html#g63cc4d3d5947f96ad7277d34eff2fab3">extnum_t</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#c56b20fd55d606fd616e83a6b5590926">extent</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract extent number lockid whose <a class="el" href="../../d0/d34/classlockid__t.html#a7925af39b3633e094635b1bd1bcfb12">lspace()</a> == t_extent <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="97af6b77d456ac99c76c004721cf9806"></a><!-- doxytag: member="lockid_t::page" ref="97af6b77d456ac99c76c004721cf9806" args="() const " -->
const shpid_t &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#97af6b77d456ac99c76c004721cf9806">page</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract short page number lockid whose <a class="el" href="../../d0/d34/classlockid__t.html#a7925af39b3633e094635b1bd1bcfb12">lspace()</a> == t_page or has parent with <a class="el" href="../../d0/d34/classlockid__t.html#a7925af39b3633e094635b1bd1bcfb12">lspace()</a>==t_page <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1d28487aaef5307aa5c12f330759acaa"></a><!-- doxytag: member="lockid_t::slot" ref="1d28487aaef5307aa5c12f330759acaa" args="() const " -->
slotid_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#1d28487aaef5307aa5c12f330759acaa">slot</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract slot number lockid whose <a class="el" href="../../d0/d34/classlockid__t.html#a7925af39b3633e094635b1bd1bcfb12">lspace()</a> == t_record <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="379bdc11cb28d6bf634dce88e4d9659a"></a><!-- doxytag: member="lockid_t::u1" ref="379bdc11cb28d6bf634dce88e4d9659a" args="() const " -->
uint2_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#379bdc11cb28d6bf634dce88e4d9659a">u1</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract uint2_t from whose <a class="el" href="../../d0/d34/classlockid__t.html#a7925af39b3633e094635b1bd1bcfb12">lspace()</a> == t_user1 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4ad7b0222776362ed790422343c75aab"></a><!-- doxytag: member="lockid_t::u2" ref="4ad7b0222776362ed790422343c75aab" args="() const " -->
uint4_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#4ad7b0222776362ed790422343c75aab">u2</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract uint4_t from whose <a class="el" href="../../d0/d34/classlockid__t.html#a7925af39b3633e094635b1bd1bcfb12">lspace()</a> == t_user2 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="22464ae0605fbddb92f3ab1010768388"></a><!-- doxytag: member="lockid_t::u3" ref="22464ae0605fbddb92f3ab1010768388" args="() const " -->
uint4_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#22464ae0605fbddb92f3ab1010768388">u3</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract uint4_t from whose <a class="el" href="../../d0/d34/classlockid__t.html#a7925af39b3633e094635b1bd1bcfb12">lspace()</a> == t_user3 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ed924d30cce2685500b5fa38c13cf2b0"></a><!-- doxytag: member="lockid_t::u4" ref="ed924d30cce2685500b5fa38c13cf2b0" args="() const " -->
uint4_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#ed924d30cce2685500b5fa38c13cf2b0">u4</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract uint4_t from whose <a class="el" href="../../d0/d34/classlockid__t.html#a7925af39b3633e094635b1bd1bcfb12">lspace()</a> == t_user4 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#d596f01a47d5ddb699e9f1e44e3a16f5">set_ext_has_page_alloc</a> (bool value)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">for extent locks only, used by volume manager  <a href="#d596f01a47d5ddb699e9f1e44e3a16f5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#b69713b9ecbd564f1a07ee9e809d6cd6">ext_has_page_alloc</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">for extent locks only, used by lock manager  <a href="#b69713b9ecbd564f1a07ee9e809d6cd6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9ba016b7552f563b74ae46288269d29f"></a><!-- doxytag: member="lockid_t::lockid_t" ref="9ba016b7552f563b74ae46288269d29f" args="(const vid_t &amp;vid)" -->
NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#9ba016b7552f563b74ae46288269d29f">lockid_t</a> (const <a class="el" href="../../d3/d3f/structvid__t.html">vid_t</a> &amp;vid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">construct from volume id <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a68cb4e6061bd8a083e649eaaa73c166"></a><!-- doxytag: member="lockid_t::lockid_t" ref="a68cb4e6061bd8a083e649eaaa73c166" args="(const extid_t &amp;extid)" -->
NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#a68cb4e6061bd8a083e649eaaa73c166">lockid_t</a> (const <a class="el" href="../../d0/d87/classextid__t.html">extid_t</a> &amp;extid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">construct from full extent id <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4c5d8d82e22754cc144a4ba122f4272b"></a><!-- doxytag: member="lockid_t::lockid_t" ref="4c5d8d82e22754cc144a4ba122f4272b" args="(const stid_t &amp;stid)" -->
NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#4c5d8d82e22754cc144a4ba122f4272b">lockid_t</a> (const <a class="el" href="../../da/d5b/structstid__t.html">stid_t</a> &amp;stid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">construct from full store id <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="af56d6d87e27421b22deb58481851dfe"></a><!-- doxytag: member="lockid_t::lockid_t" ref="af56d6d87e27421b22deb58481851dfe" args="(const lpid_t &amp;lpid)" -->
NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#af56d6d87e27421b22deb58481851dfe">lockid_t</a> (const <a class="el" href="../../d5/d47/classlpid__t.html">lpid_t</a> &amp;lpid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">construct from full page id <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="67546caa01082b6a88e3e193d76c5913"></a><!-- doxytag: member="lockid_t::lockid_t" ref="67546caa01082b6a88e3e193d76c5913" args="(const rid_t &amp;rid)" -->
NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#67546caa01082b6a88e3e193d76c5913">lockid_t</a> (const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;rid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">construct from full record id <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="38a929441e25537be2f6c073e0ceb0eb"></a><!-- doxytag: member="lockid_t::lockid_t" ref="38a929441e25537be2f6c073e0ceb0eb" args="(const kvl_t &amp;kvl)" -->
NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#38a929441e25537be2f6c073e0ceb0eb">lockid_t</a> (const <a class="el" href="../../d9/dbd/structkvl__t.html">kvl_t</a> &amp;kvl)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">construct from <a class="el" href="../../d9/dbd/structkvl__t.html">kvl_t</a> (hash of key,value, from <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a>) <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0e8875092db76a67276958146d88d08e"></a><!-- doxytag: member="lockid_t::lockid_t" ref="0e8875092db76a67276958146d88d08e" args="(const lockid_t &amp;i)" -->
NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#0e8875092db76a67276958146d88d08e">lockid_t</a> (const <a class="el" href="../../d0/d34/classlockid__t.html">lockid_t</a> &amp;i)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">copy constructor <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8864fcca7f5253fd31928ea7f1806637"></a><!-- doxytag: member="lockid_t::lockid_t" ref="8864fcca7f5253fd31928ea7f1806637" args="(const user1_t &amp;u)" -->
NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#8864fcca7f5253fd31928ea7f1806637">lockid_t</a> (const <a class="el" href="../../d3/d65/structlockid__t_1_1user1__t.html">user1_t</a> &amp;u)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">construct from <a class="el" href="../../d3/d65/structlockid__t_1_1user1__t.html">user1_t</a> <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="dc4320833ba85c864e89552fa26e8d1b"></a><!-- doxytag: member="lockid_t::lockid_t" ref="dc4320833ba85c864e89552fa26e8d1b" args="(const user2_t &amp;u)" -->
NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#dc4320833ba85c864e89552fa26e8d1b">lockid_t</a> (const <a class="el" href="../../d6/d0f/structlockid__t_1_1user2__t.html">user2_t</a> &amp;u)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">construct from <a class="el" href="../../d6/d0f/structlockid__t_1_1user2__t.html">user2_t</a> <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b5e01a55e0d5df43570d2cfe07f0c3f7"></a><!-- doxytag: member="lockid_t::lockid_t" ref="b5e01a55e0d5df43570d2cfe07f0c3f7" args="(const user3_t &amp;u)" -->
NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#b5e01a55e0d5df43570d2cfe07f0c3f7">lockid_t</a> (const <a class="el" href="../../d2/d2b/structlockid__t_1_1user3__t.html">user3_t</a> &amp;u)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">construct from <a class="el" href="../../d2/d2b/structlockid__t_1_1user3__t.html">user3_t</a> <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="3a35d3dae62a772c9e16f8d5de20b866"></a><!-- doxytag: member="lockid_t::lockid_t" ref="3a35d3dae62a772c9e16f8d5de20b866" args="(const user4_t &amp;u)" -->
NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#3a35d3dae62a772c9e16f8d5de20b866">lockid_t</a> (const <a class="el" href="../../d0/d6b/structlockid__t_1_1user4__t.html">user4_t</a> &amp;u)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">construct from <a class="el" href="../../d0/d6b/structlockid__t_1_1user4__t.html">user4_t</a> <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7e2ca5b5ec96ae43678c776df022618b"></a><!-- doxytag: member="lockid_t::extract_extent" ref="7e2ca5b5ec96ae43678c776df022618b" args="(extid_t &amp;e) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#7e2ca5b5ec96ae43678c776df022618b">extract_extent</a> (<a class="el" href="../../d0/d87/classextid__t.html">extid_t</a> &amp;e) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract a full extent id from an extent lock <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="b3249fc63b18228734847aab1ea5fd0e"></a><!-- doxytag: member="lockid_t::extract_stid" ref="b3249fc63b18228734847aab1ea5fd0e" args="(stid_t &amp;s) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#b3249fc63b18228734847aab1ea5fd0e">extract_stid</a> (<a class="el" href="../../da/d5b/structstid__t.html">stid_t</a> &amp;s) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract a full store id from a store, page, or record lock <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ae424a3d85853ece7d7aaabb72ea2b8d"></a><!-- doxytag: member="lockid_t::extract_lpid" ref="ae424a3d85853ece7d7aaabb72ea2b8d" args="(lpid_t &amp;p) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#ae424a3d85853ece7d7aaabb72ea2b8d">extract_lpid</a> (<a class="el" href="../../d5/d47/classlpid__t.html">lpid_t</a> &amp;p) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract a full page id from a page or record lock <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="03b2f9b270d7423216435d1bdeaed552"></a><!-- doxytag: member="lockid_t::extract_rid" ref="03b2f9b270d7423216435d1bdeaed552" args="(rid_t &amp;r) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#03b2f9b270d7423216435d1bdeaed552">extract_rid</a> (<a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;r) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract a full record id from a record lock <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="dee2ec1336ef1cc7b72a0e70e6dcd66f"></a><!-- doxytag: member="lockid_t::extract_kvl" ref="dee2ec1336ef1cc7b72a0e70e6dcd66f" args="(kvl_t &amp;k) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#dee2ec1336ef1cc7b72a0e70e6dcd66f">extract_kvl</a> (<a class="el" href="../../d9/dbd/structkvl__t.html">kvl_t</a> &amp;k) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract a <a class="el" href="../../d9/dbd/structkvl__t.html">kvl_t</a> (hash of key,value) from a key-value lock <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="fd9c04115c8340b282461cdd1fa9b277"></a><!-- doxytag: member="lockid_t::extract_user1" ref="fd9c04115c8340b282461cdd1fa9b277" args="(user1_t &amp;u) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#fd9c04115c8340b282461cdd1fa9b277">extract_user1</a> (<a class="el" href="../../d3/d65/structlockid__t_1_1user1__t.html">user1_t</a> &amp;u) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract a <a class="el" href="../../d3/d65/structlockid__t_1_1user1__t.html">user1_t</a> from user-defined entity 1, 2, 3, or 4 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d297a40d6efafc0680df57b7ea400580"></a><!-- doxytag: member="lockid_t::extract_user2" ref="d297a40d6efafc0680df57b7ea400580" args="(user2_t &amp;u) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#d297a40d6efafc0680df57b7ea400580">extract_user2</a> (<a class="el" href="../../d6/d0f/structlockid__t_1_1user2__t.html">user2_t</a> &amp;u) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract a <a class="el" href="../../d6/d0f/structlockid__t_1_1user2__t.html">user2_t</a> from user-defined entity 2, 3, or 4 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9746d4d6e3e8b0043722fc2800ee7a3d"></a><!-- doxytag: member="lockid_t::extract_user3" ref="9746d4d6e3e8b0043722fc2800ee7a3d" args="(user3_t &amp;u) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#9746d4d6e3e8b0043722fc2800ee7a3d">extract_user3</a> (<a class="el" href="../../d2/d2b/structlockid__t_1_1user3__t.html">user3_t</a> &amp;u) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract a <a class="el" href="../../d2/d2b/structlockid__t_1_1user3__t.html">user3_t</a> from user-defined entity 3 or 4 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ed3401a473c59b1b94dc52dda8e02d3e"></a><!-- doxytag: member="lockid_t::extract_user4" ref="ed3401a473c59b1b94dc52dda8e02d3e" args="(user4_t &amp;u) const " -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#ed3401a473c59b1b94dc52dda8e02d3e">extract_user4</a> (<a class="el" href="../../d0/d6b/structlockid__t_1_1user4__t.html">user4_t</a> &amp;u) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">extract a <a class="el" href="../../d2/d2b/structlockid__t_1_1user3__t.html">user3_t</a> from user-defined entity 4 <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d65f03433e34bcb78a5e53a268e9dfa9"></a><!-- doxytag: member="lockid_t::is_user_lock" ref="d65f03433e34bcb78a5e53a268e9dfa9" args="() const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#d65f03433e34bcb78a5e53a268e9dfa9">is_user_lock</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return true if type is t_user1, t_user2, t_user3 or t_user4. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../db/dc7/classw__rc__t.html">w_rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#1fd98ec9a5a1059130e6fa3d6b640372">truncate</a> (<a class="el" href="../../d0/d34/classlockid__t.html#089158c8aab5455a9d514f13ee9f285f">name_space_t</a> space)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Nullify all parts of the lockid that apply to children in the hierarchy.  <a href="#1fd98ec9a5a1059130e6fa3d6b640372"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="0bdcdf44070ad606f35052d42323ca80"></a><!-- doxytag: member="lockid_t::operator=" ref="0bdcdf44070ad606f35052d42323ca80" args="(const lockid_t &amp;i)" -->
<a class="el" href="../../d0/d34/classlockid__t.html">lockid_t</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#0bdcdf44070ad606f35052d42323ca80">operator=</a> (const <a class="el" href="../../d0/d34/classlockid__t.html">lockid_t</a> &amp;i)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">copy operator <br></td></tr>
<tr><td colspan="2"><br><h2>Static Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="887dd1d3431c22b36db5c3fe8114387b"></a><!-- doxytag: member="lockid_t::cached_granularity" ref="887dd1d3431c22b36db5c3fe8114387b" args="" -->
static const int&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d34/classlockid__t.html#887dd1d3431c22b36db5c3fe8114387b">cached_granularity</a> = t_page</td></tr>

<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/d65/structlockid__t_1_1user1__t.html">user1_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">User-defined entity 1.  <a href="../../d3/d65/structlockid__t_1_1user1__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/d0f/structlockid__t_1_1user2__t.html">user2_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">User-defined entity 2.  <a href="../../d6/d0f/structlockid__t_1_1user2__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d2/d2b/structlockid__t_1_1user3__t.html">user3_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">User-defined entity 3.  <a href="../../d2/d2b/structlockid__t_1_1user3__t.html#_details">More...</a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">struct &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d0/d6b/structlockid__t_1_1user4__t.html">user4_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">User-defined entity 4.  <a href="../../d0/d6b/structlockid__t_1_1user4__t.html#_details">More...</a><br></td></tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="d596f01a47d5ddb699e9f1e44e3a16f5"></a><!-- doxytag: member="lockid_t::set_ext_has_page_alloc" ref="d596f01a47d5ddb699e9f1e44e3a16f5" args="(bool value)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void lockid_t::set_ext_has_page_alloc           </td>
          <td>(</td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>value</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
for extent locks only, used by volume manager 
<p>
<a class="anchor" name="FREEEXTLOCK"></a> Set to true when the extent contains an uncommitted allocated page. This is done when a page is allocated in the extent; it is used for special handling of extent locks in the lock manager.<p>
The special handling requires a little background:<p>
<ul>
<li>extent locks are not in the hierarchy</li><li>extent IX locks are acquired when a page in the extent is allocated (or recovered, in recovery case)</li><li>extent IX locks are acquired when a page in the extent is freed</li><li>extent IX locks are acquired when allocating the extent to a store</li><li>extent EX locks are acquired when deallocating all the extents in a store (destroying the store), at which time we have an EX lock on the store.</li></ul>
<p>
<ul>
<li>We need some way to tell when an extent can be freed. It can be freed when there are no pages allocated in the extent. Presumably we would have any transaction that deallocated a page in the extent try to deallocate the extent (i.e., if there are no more pages in the extent). But it doesn't acquire an EX lock on the extent, so another transaction could slip in and allocate pages in the extent.</li><li>If the transaction (that deleted one or more pages in an extent) tries to deallocate the extent at the transaction end, it would have to inspect the extent link to tell if the extent has no pages in it, and it would still have to do something to avoid races with other transactions.</li></ul>
<p>
The special handling is this:<ul>
<li>Transactions that allocate pages in an extent set the bit in the <b>lock</b> saying there are pages allocated in the extent.</li><li>Transactions that deallocate pages in an extent clear the bit in the <b>lock</b> when there are no more pages allocated in the extent.</li><li>This bypasses a page fix for inspecting the <a class="el" href="../../d3/d86/classextlink__t.html">extlink_t</a>.</li><li>Synchronization for this bit in the lockid is provided by the volume manager; the bit is set and cleared only in the volume manager, which is a monitor.</li><li>At transaction end, a transaction that has an IX lock on an extent tries to upgrade it to an EX if the extent lock indicates that no pages are allocated in the extent. If it succeeds, the lock manager can delete the extent while holding the EX lock, then free the lock.</li></ul>
<p>
When at the end of transaction, lock_m::release_duration() is called, the lock manager returns eFOUNDEXTTOFREE when it encounters an extent lock with this bit set. 
</div>
</div><p>
<a class="anchor" name="b69713b9ecbd564f1a07ee9e809d6cd6"></a><!-- doxytag: member="lockid_t::ext_has_page_alloc" ref="b69713b9ecbd564f1a07ee9e809d6cd6" args="() const " -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool lockid_t::ext_has_page_alloc           </td>
          <td>(</td>
          <td class="paramname">          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"> const</td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
for extent locks only, used by lock manager 
<p>
Returns true when the extent contains an uncommitted allocated page. See discussion in set_ext_has_page_alloc, above. 
</div>
</div><p>
<a class="anchor" name="1fd98ec9a5a1059130e6fa3d6b640372"></a><!-- doxytag: member="lockid_t::truncate" ref="1fd98ec9a5a1059130e6fa3d6b640372" args="(name_space_t space)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/dc7/classw__rc__t.html">w_rc_t</a> lockid_t::truncate           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d0/d34/classlockid__t.html#089158c8aab5455a9d514f13ee9f285f">name_space_t</a>&nbsp;</td>
          <td class="paramname"> <em>space</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Nullify all parts of the lockid that apply to children in the hierarchy. 
<p>
If the given space isn't in the hierarchy, this generates a fatal error. 
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>src/sm/<a class="el" href="../../d1/d8e/lock__s_8h-source.html">lock_s.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Jan 2 15:14:07 2012 for Shore Storage Manager by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
