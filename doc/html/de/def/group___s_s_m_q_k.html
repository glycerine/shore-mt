<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Shore Storage Manager: Early Lock Release: Quarks</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="../../modules.html"><span>Modules</span></a></li>
    <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="../../classes.html"><span>Classes</span></a></li>
    <li><a href="../../files.html"><span>Files</span></a></li>
    <li><a href="../../dirs.html"><span>Directories</span></a></li>
    <li><a href="../../pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="../../examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<h1>Early Lock Release: Quarks<br>
<small>
[<a class="el" href="../../d8/d1e/group___s_s_m_x_c_t.html">Transactions, Locking and Logging</a>]</small>
</h1>
<p>
Collaboration diagram for Early Lock Release: Quarks:<center><table><tr><td><img src="../../de/def/group___s_s_m_q_k.png" border="0" alt="" usemap="#d9/d3f/de_2def_2group______s__s__m__q__k_map">
<map name="d9/d3f/de_2def_2group______s__s__m__q__k_map">
<area href="../../d8/d1e/group___s_s_m_x_c_t.html" shape="rect" coords="5,5,245,32" alt="">
</map></td></tr></table></center>
<hr><a name="_details"></a><h2>Detailed Description</h2>
A quark is a marker in the transaction's list of acquired locks. One may release all short-duration locks acquired since the quark was inserted into the list via sm_quark_t::open(). The lock manager modifies the locks acquired inside a quark so that non-extent locks are no longer than short-duration.<p>
This is for experimentation only, and is <em>not</em> well-tested or supported.<p>
How used: <div class="fragment"><pre class="fragment"> <a class="code" href="../../d3/dfc/classsm__quark__t.html">sm_quark_t</a> *q = <span class="keyword">new</span> <a class="code" href="../../d3/dfc/classsm__quark__t.html">sm_quark_t</a>;
 q-&gt;<a class="code" href="../../d3/dfc/classsm__quark__t.html#238d479c2e0122e4e2944bbd2abceb34">open</a>();  <span class="comment">// inserts marker in transaction's list.</span>
 ...
 q-&gt;<a class="code" href="../../d3/dfc/classsm__quark__t.html#95399e0bf47ccb9dde83be88abe28ab0">close</a>(); <span class="comment">// frees short-duration locks to the marker.</span>
 <span class="keyword">delete</span> q;
</pre></div><p>
Deleting the quark without closing it causes it to be closed. Quarks may <em>not</em> be used with multi-threaded transactions.<p>
Note that if a transaction has multiple threads attached when a thread opens a quark, there is no way to determine where the quark takes effect, and since it affects the locks acquired by all threads of the transaction, it must be used very carefully where multiply-threaded transactions are concerned. 
<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Classes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">class &nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d3/dfc/classsm__quark__t.html">sm_quark_t</a></td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">List of locks acquired by a transaction since the quark was "opened".  <a href="../../d3/dfc/classsm__quark__t.html#_details">More...</a><br></td></tr>
</table>
<hr size="1"><address style="align: right;"><small>Generated on Mon Jan 2 15:14:01 2012 for Shore Storage Manager by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
