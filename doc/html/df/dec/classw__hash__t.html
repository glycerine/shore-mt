<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Shore Storage Manager: w_hash_t&lt; T, LOCK, K &gt; Class Template Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="../../modules.html"><span>Modules</span></a></li>
    <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="../../classes.html"><span>Classes</span></a></li>
    <li><a href="../../files.html"><span>Files</span></a></li>
    <li><a href="../../dirs.html"><span>Directories</span></a></li>
    <li><a href="../../pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="../../examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="../../classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="../../hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>w_hash_t&lt; T, LOCK, K &gt; Class Template Reference</h1><!-- doxytag: class="w_hash_t" --><!-- doxytag: inherits="w_base_t" -->Inherits <a class="el" href="../../d9/da0/classw__base__t.html">w_base_t</a>.
<p>
Inheritance diagram for w_hash_t&lt; T, LOCK, K &gt;:<p><center><img src="../../da/d96/classw__hash__t__inherit__graph.png" border="0" usemap="#da/d11/w__hash__t_3_01_t_00_01_l_o_c_k_00_01_k_01_4__inherit__map" alt="Inheritance graph"></center>
<map name="da/d11/w__hash__t_3_01_t_00_01_l_o_c_k_00_01_k_01_4__inherit__map">
<area href="../../d9/da0/classw__base__t.html" shape="rect" coords="52,5,133,32" alt="">
</map>
<center><font size="2">[<a target="top" href="../../graph_legend.html">legend</a>]</font></center>Collaboration diagram for w_hash_t&lt; T, LOCK, K &gt;:<p><center><img src="../../db/d0e/classw__hash__t__coll__graph.png" border="0" usemap="#de/df0/w__hash__t_3_01_t_00_01_l_o_c_k_00_01_k_01_4__coll__map" alt="Collaboration graph"></center>
<map name="de/df0/w__hash__t_3_01_t_00_01_l_o_c_k_00_01_k_01_4__coll__map">
<area href="../../d9/da0/classw__base__t.html" shape="rect" coords="52,5,133,32" alt="">
</map>
<center><font size="2">[<a target="top" href="../../graph_legend.html">legend</a>]</font></center><a href="../../d3/d12/classw__hash__t-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
<h3>template&lt;class T, class LOCK, class K&gt;<br>
 class w_hash_t&lt; T, LOCK, K &gt;</h3>

Templated hash table. Not particularly sophisticated. 
<p>
The hash function used here is :<ul>
<li>w_hash(key) &amp; _mask</li></ul>
<p>
Thus, to make this work, your key type needs to be a class containing a public method <a class="el" href="../../d9/da0/classw__base__t.html#7d1c7ae407200662fd16b64de4dcde46">w_base_t::uint4_t</a> hash() const; (This is somewhat inconvenient if you want the key to be an atomic type, but it's a lot easier to find locate the hash functions this way and we don't have to worry about any implicit construction of types by the compiler this way.)<p>
Note that since the hash function uses the _mask to collect the lower bits of the result of w_hash, the key.hash() function should be sensitive to the way hash-table uses it, and the hash tables should be aware of the likely bit distribution of the result of key.hash(). 
<p>

<p>
Definition at line <a class="el" href="../../d2/d37/w__hash_8h-source.html#l00094">94</a> of file <a class="el" href="../../d2/d37/w__hash_8h-source.html">w_hash.h</a>.<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dec/classw__hash__t.html#1c740c6fb926c136c627cb661510e52e">w_hash_t</a> (<a class="el" href="../../d9/da0/classw__base__t.html#7d1c7ae407200662fd16b64de4dcde46">uint4_t</a> sz, <a class="el" href="../../d9/da0/classw__base__t.html#7d1c7ae407200662fd16b64de4dcde46">uint4_t</a> key_offset, <a class="el" href="../../d9/da0/classw__base__t.html#7d1c7ae407200662fd16b64de4dcde46">uint4_t</a> link_offset, const LOCK *lock)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct hash table.  <a href="#1c740c6fb926c136c627cb661510e52e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="a7f8e105ea95a61ecdfabce8a0795300"></a><!-- doxytag: member="w_hash_t::push" ref="a7f8e105ea95a61ecdfabce8a0795300" args="(T *t)" -->
<a class="el" href="../../df/dec/classw__hash__t.html">w_hash_t</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dec/classw__hash__t.html#a7f8e105ea95a61ecdfabce8a0795300">push</a> (T *t)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Insert an element in the table at the front of its bucket. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7a20077c59563463dfc334a1c8d7cc39"></a><!-- doxytag: member="w_hash_t::append" ref="7a20077c59563463dfc334a1c8d7cc39" args="(T *t)" -->
<a class="el" href="../../df/dec/classw__hash__t.html">w_hash_t</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dec/classw__hash__t.html#7a20077c59563463dfc334a1c8d7cc39">append</a> (T *t)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Insert an element in the table at the tail of its bucket. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bd3cb0d67e32fd1486994def0b39cff7"></a><!-- doxytag: member="w_hash_t::lookup" ref="bd3cb0d67e32fd1486994def0b39cff7" args="(const K &amp;k) const " -->
T *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dec/classw__hash__t.html#bd3cb0d67e32fd1486994def0b39cff7">lookup</a> (const K &amp;k) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Find an element in the table. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="1af6fa804cc1948238bedd4c2919b324"></a><!-- doxytag: member="w_hash_t::member" ref="1af6fa804cc1948238bedd4c2919b324" args="(T const *t) const " -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dec/classw__hash__t.html#1af6fa804cc1948238bedd4c2919b324">member</a> (T const *t) const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">True if element is in the table. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="7bb8f8aa5c0cc7c5af8bbcf0ed68c582"></a><!-- doxytag: member="w_hash_t::remove" ref="7bb8f8aa5c0cc7c5af8bbcf0ed68c582" args="(const K &amp;k)" -->
T *&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dec/classw__hash__t.html#7bb8f8aa5c0cc7c5af8bbcf0ed68c582">remove</a> (const K &amp;k)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove the (single) element with the given key. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="bdfa01d7a36da73e5b5ee3e705046c7f"></a><!-- doxytag: member="w_hash_t::remove" ref="bdfa01d7a36da73e5b5ee3e705046c7f" args="(T *t)" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dec/classw__hash__t.html#bdfa01d7a36da73e5b5ee3e705046c7f">remove</a> (T *t)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Remove the given element that is in the table. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="621b3bda4af0521debf083ff61fa7c02"></a><!-- doxytag: member="w_hash_t::num_members" ref="621b3bda4af0521debf083ff61fa7c02" args="() const " -->
<a class="el" href="../../d9/da0/classw__base__t.html#7d1c7ae407200662fd16b64de4dcde46">uint4_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dec/classw__hash__t.html#621b3bda4af0521debf083ff61fa7c02">num_members</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Total number of elements in the table. <br></td></tr>
<tr><td colspan="2"><br><h2>Friends</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="8b5e85d31af455f841b05fa3665d5a28"></a><!-- doxytag: member="w_hash_t::obj" ref="8b5e85d31af455f841b05fa3665d5a28" args="" -->
ostream &amp;const <a class="el" href="../../df/dec/classw__hash__t.html">w_hash_t</a>&lt; T,<br>
 LOCK, K &gt; &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dec/classw__hash__t.html#8b5e85d31af455f841b05fa3665d5a28">obj</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="424c44f591262962e7eae7b84106677d"></a><!-- doxytag: member="w_hash_t::operator&lt;&lt; BIND_FRIEND_OPERATOR_PART_2B" ref="424c44f591262962e7eae7b84106677d" args="(T, LOCK, K)(ostream &amp;o" -->
ostream &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../df/dec/classw__hash__t.html#424c44f591262962e7eae7b84106677d">operator&lt;&lt; BIND_FRIEND_OPERATOR_PART_2B</a> (T, LOCK, K)(ostream &amp;o</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Standard ostream operator, despite the macro here (in <a class="el" href="../../de/db9/w__workaround_8h.html">w_workaround.h</a>). <br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="1c740c6fb926c136c627cb661510e52e"></a><!-- doxytag: member="w_hash_t::w_hash_t" ref="1c740c6fb926c136c627cb661510e52e" args="(uint4_t sz, uint4_t key_offset, uint4_t link_offset, const LOCK *lock)" -->
<div class="memitem">
<div class="memproto">
<div class="memtemplate">
template&lt;class T, class LOCK, class K&gt; </div>
      <table class="memname">
        <tr>
          <td class="memname">NORET <a class="el" href="../../df/dec/classw__hash__t.html">w_hash_t</a>&lt; T, LOCK, K &gt;::<a class="el" href="../../df/dec/classw__hash__t.html">w_hash_t</a>           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/da0/classw__base__t.html#7d1c7ae407200662fd16b64de4dcde46">uint4_t</a>&nbsp;</td>
          <td class="paramname"> <em>sz</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/da0/classw__base__t.html#7d1c7ae407200662fd16b64de4dcde46">uint4_t</a>&nbsp;</td>
          <td class="paramname"> <em>key_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d9/da0/classw__base__t.html#7d1c7ae407200662fd16b64de4dcde46">uint4_t</a>&nbsp;</td>
          <td class="paramname"> <em>link_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const LOCK *&nbsp;</td>
          <td class="paramname"> <em>lock</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct hash table. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>sz</em>&nbsp;</td><td>Number of bits in result values. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>key_offset</em>&nbsp;</td><td>Offset in object of type T where key K is found </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>link_offset</em>&nbsp;</td><td>Offset in object of type T where <a class="el" href="../../dd/de8/classw__link__t.html">w_link_t</a> is found This <a class="el" href="../../dd/de8/classw__link__t.html">w_link_t</a> is used to hold the object in a hash table bucket </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>lock</em>&nbsp;</td><td>Pointer to a lock used to protect the table.</td></tr>
  </table>
</dl>
The size determines a mask used to restrict the resulting hash values to a desired size.<p>
The lock passed in is not used. There is no enforcement of locking these structures. The template contains the lock type so that it is relatively easy to tell what structures are unprotected by perusing the code.<p>
See <a class="el" href="../../de/d94/w__hash_8h.html#7972fef3a52cf435adceafc35b8369dc">W_HASH_ARG(class,key,link)</a> 
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>src/fc/<a class="el" href="../../d2/d37/w__hash_8h-source.html">w_hash.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Jan 2 15:14:18 2012 for Shore Storage Manager by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
