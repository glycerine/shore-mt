<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Shore Storage Manager: Files of Records</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="../../modules.html"><span>Modules</span></a></li>
    <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
    <li><a href="../../classes.html"><span>Classes</span></a></li>
    <li><a href="../../files.html"><span>Files</span></a></li>
    <li><a href="../../dirs.html"><span>Directories</span></a></li>
    <li><a href="../../pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="../../examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<h1>Files of Records<br>
<small>
[<a class="el" href="../../dd/d39/group___s_s_m_s_t_g.html">Storage Structures</a>]</small>
</h1>
<p>
Collaboration diagram for Files of Records:<center><table><tr><td><img src="../../d8/db0/group___s_s_m_f_i_l_e.png" border="0" alt="" usemap="#df/d2a/d8_2db0_2group______s__s__m__f__i__l__e_map">
<map name="df/d2a/d8_2db0_2group______s__s__m__f__i__l__e_map">
<area href="../../d6/dfa/group___s_s_m_p_i_n.html" shape="rect" coords="365,5,488,32" alt="">
<area href="../../dd/d39/group___s_s_m_s_t_g.html" shape="rect" coords="6,5,146,32" alt="">
</map></td></tr></table></center>
<hr><a name="_details"></a><h2>Detailed Description</h2>
You can create, destroy, and scan files of records. You may exert some control over the order in which records appear in the file (a physical scan), but, in general, the storage manager decides where to put records.<p>
Pages in a file are slotted pages: Each page contains an array of slots. Records take one of three forms: small, large, and very large.<ul>
<li>Small records fit in the slots on the file pages.</li><li>Large records are too big to fit on a slotted page, so they are put elsewhere, and the slots point to these records. Actually, what is in a slot is a small array of page pointers to the data of the large record.</li><li>A very large record is one whose slot in the file page contains a single reference to a page that is an index of data pages.</li></ul>
<p>
Because records may take these forms, the API for creating records contains the opportunity for you to provide a hint about the ultimate size of the record so that the storage manager can create the proper structure for the record immediately, rather than creating a small record that is soon to be converted to a large, then a very large record by subsequent appends.<p>
All records contain a client-defined header. This is for the convenience of server-writers. The header must fit on the slotted page, so it should never be very large.<p>
The following methods manipulate files of records and the records found there.<p>
Modules below describe file traversal and appending to files (<a class="el" href="../../d3/d29/group___s_s_m_s_c_a_n_f.html">Scanning Files</a>), and pinning individual records in the buffer pool for extended operations (<a class="el" href="../../d6/dfa/group___s_s_m_p_i_n.html">Pinning Records</a>).<h2><a class="anchor" name="UNINIT">
Uninitialized Data</a></h2>
The functions create_rec, append_rec, and update_rec can be used to write blocks of data that are all zeroes, with minimal logging. This is useful for creating records of known size but with uninitialized data. The type <a class="el" href="../../d4/d3e/classzvec__t.html">zvec_t</a>, a special case of <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a>, is for this purpose. Construct it with only a size, as follows: <div class="fragment"><pre class="fragment"> <a class="code" href="../../d4/d3e/classzvec__t.html">zvec_t</a> zdata(100000);
</pre></div> The underlying logging code recognizes that this is a vector of zeroes and logs only a count, not the data themselves.<h2><a class="anchor" name="Errors">
Errors</a></h2>
If an error occurs in the middle of one of these methods that is updating persistent data, the record or file <em>could</em> be in an inconsistent state. The caller has the choice of aborting the transaction or rolling back to the nearest savepoint (see <a class="el" href="../../d8/d1e/group___s_s_m_x_c_t.html">Transactions, Locking and Logging</a>).<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d5/d57/group___s_s_m_s_c_a_n.html">Scanning</a>, <a class="el" href="../../d6/dfa/group___s_s_m_p_i_n.html">Pinning Records</a>, <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a>, <a class="el" href="../../d4/d3e/classzvec__t.html">zvec_t</a>, IDs. </dd></dl>

<p>
<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Modules</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d6/dfa/group___s_s_m_p_i_n.html">Pinning Records</a></td></tr>

<tr><td colspan="2"><br><h2>Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db0/group___s_s_m_f_i_l_e.html#gd35373a32c3480b5437e7d602065d6e5">ss_m::create_file</a> (<a class="el" href="../../d3/d3f/structvid__t.html">vid_t</a> vid, <a class="el" href="../../da/d5b/structstid__t.html">stid_t</a> &amp;fid, store_property_t property, shpid_t cluster_hint=0)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a file of records.  <a href="#gd35373a32c3480b5437e7d602065d6e5"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db0/group___s_s_m_f_i_l_e.html#gf95f62e06fea7149fd0503a194c7a548">ss_m::destroy_file</a> (const <a class="el" href="../../da/d5b/structstid__t.html">stid_t</a> &amp;fid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy a file of records.  <a href="#gf95f62e06fea7149fd0503a194c7a548"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db0/group___s_s_m_f_i_l_e.html#gdbce031cbb0a1e53741a43a536c3f1c9">ss_m::create_rec</a> (const <a class="el" href="../../da/d5b/structstid__t.html">stid_t</a> &amp;fid, const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;hdr, smsize_t len_hint, const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;data, <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;new_rid, uint4_t policy=t_cache|t_compact|t_append)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Create a new record.  <a href="#gdbce031cbb0a1e53741a43a536c3f1c9"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db0/group___s_s_m_f_i_l_e.html#g5ff61de1252e8429d60c0eb997854649">ss_m::destroy_rec</a> (const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;rid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Destroy a record.  <a href="#g5ff61de1252e8429d60c0eb997854649"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db0/group___s_s_m_f_i_l_e.html#g4d13fe9309464735e9e70272f19d59b7">ss_m::update_rec</a> (const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;rid, smsize_t start, const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modify the body of an existing record.  <a href="#g4d13fe9309464735e9e70272f19d59b7"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db0/group___s_s_m_f_i_l_e.html#g959214374f6bc2cc288a0bb5e1aedf5e">ss_m::update_rec_hdr</a> (const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;rid, smsize_t start, const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;hdr)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Modify the header of an existing record.  <a href="#g959214374f6bc2cc288a0bb5e1aedf5e"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db0/group___s_s_m_f_i_l_e.html#gc0a68cce342341fb85880207d548fa6d">ss_m::append_rec</a> (const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;rid, const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;data)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Append bytes to a record body.  <a href="#gc0a68cce342341fb85880207d548fa6d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db0/group___s_s_m_f_i_l_e.html#gc857905ab45dd35d8931bcfa8271d8b6">ss_m::truncate_rec</a> (const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;rid, smsize_t amount)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Chop bytes off the end of a record body.  <a href="#gc857905ab45dd35d8931bcfa8271d8b6"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db0/group___s_s_m_f_i_l_e.html#g5ad82e549d449942b89289bc7ab11bf0">ss_m::truncate_rec</a> (const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;rid, smsize_t amount, bool &amp;should_forward)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Chop bytes off the end of a record body.  <a href="#g5ad82e549d449942b89289bc7ab11bf0"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db0/group___s_s_m_f_i_l_e.html#g4b1bf5e2948e1c9242ed237b6a45d0a8">append_file_i::create_rec</a> (const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;hdr, smsize_t len_hint, const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;data, <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;rid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Append a new record to the end of the file.  <a href="#g4b1bf5e2948e1c9242ed237b6a45d0a8"></a><br></td></tr>
</table>
<hr><h2>Function Documentation</h2>
<a class="anchor" name="gd35373a32c3480b5437e7d602065d6e5"></a><!-- doxytag: member="ss_m::create_file" ref="gd35373a32c3480b5437e7d602065d6e5" args="(vid_t vid, stid_t &amp;fid, store_property_t property, shpid_t cluster_hint=0)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a> ss_m::create_file           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d3/d3f/structvid__t.html">vid_t</a>&nbsp;</td>
          <td class="paramname"> <em>vid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d5b/structstid__t.html">stid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../da/d44/classss__m.html#a7a0a9b5677337b6d5a4e3f42d9fa149">store_property_t</a>&nbsp;</td>
          <td class="paramname"> <em>property</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">shpid_t&nbsp;</td>
          <td class="paramname"> <em>cluster_hint</em> = <code>0</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a file of records. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>vid</em>&nbsp;</td><td>Volume on which to create a file. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>Returns (store) ID of the new file here. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>property</em>&nbsp;</td><td>Give the file the this property. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cluster_hint</em>&nbsp;</td><td>Not used.</td></tr>
  </table>
</dl>
The cluster hint is included in the API for future use. It has no effect. <dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="../../df/d97/create__rec_8cpp-example.html#a28">create_rec.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="gf95f62e06fea7149fd0503a194c7a548"></a><!-- doxytag: member="ss_m::destroy_file" ref="gf95f62e06fea7149fd0503a194c7a548" args="(const stid_t &amp;fid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a> ss_m::destroy_file           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../da/d5b/structstid__t.html">stid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>fid</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy a file of records. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>ID of the file to destroy. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="gdbce031cbb0a1e53741a43a536c3f1c9"></a><!-- doxytag: member="ss_m::create_rec" ref="gdbce031cbb0a1e53741a43a536c3f1c9" args="(const stid_t &amp;fid, const vec_t &amp;hdr, smsize_t len_hint, const vec_t &amp;data, rid_t &amp;new_rid, uint4_t policy=t_cache|t_compact|t_append)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a> ss_m::create_rec           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../da/d5b/structstid__t.html">stid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>fid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">smsize_t&nbsp;</td>
          <td class="paramname"> <em>len_hint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>new_rid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">uint4_t&nbsp;</td>
          <td class="paramname"> <em>policy</em> = <code>t_cache|t_compact|t_append</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Create a new record. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>fid</em>&nbsp;</td><td>ID of the file in which to create a record. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hdr</em>&nbsp;</td><td>What to put in the record's header. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>len_hint</em>&nbsp;</td><td>Hint about how big the record will ultimately be. This is used to determine the initial format of the record. If you plan to append to the record and know that it will ultimately become a large record, it is more efficient to give a size hint that is larger than a page here. Otherwise, the record will be made small (as determined by the size of the parameter <em>data</em> ), and subsequent appends will cause the record to be converted to a large record. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>data</em>&nbsp;</td><td>What to put in the record's body. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>new_rid</em>&nbsp;</td><td>ID of the newly created record. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>policy</em>&nbsp;</td><td>File compaction policy to use. See <a class="el" href="../../de/d81/sm__base_8h.html#f27d7360e7f0257bb33d6826074f60ff">pg_policy_t</a> for possible values. </td></tr>
  </table>
</dl>
<dl compact><dt><b>Examples: </b></dt><dd>
<a class="el" href="../../df/d97/create__rec_8cpp-example.html#a30">create_rec.cpp</a>.</dl>
</div>
</div><p>
<a class="anchor" name="g5ff61de1252e8429d60c0eb997854649"></a><!-- doxytag: member="ss_m::destroy_rec" ref="g5ff61de1252e8429d60c0eb997854649" args="(const rid_t &amp;rid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a> ss_m::destroy_rec           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>rid</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"><code> [static, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Destroy a record. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rid</em>&nbsp;</td><td>ID of the record to destroy. </td></tr>
  </table>
</dl>

</div>
</div><p>
<a class="anchor" name="g4d13fe9309464735e9e70272f19d59b7"></a><!-- doxytag: member="ss_m::update_rec" ref="g4d13fe9309464735e9e70272f19d59b7" args="(const rid_t &amp;rid, smsize_t start, const vec_t &amp;data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a> ss_m::update_rec           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>rid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">smsize_t&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Modify the body of an existing record. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rid</em>&nbsp;</td><td>ID of the record to modify. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>start</em>&nbsp;</td><td>First byte to change. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>data</em>&nbsp;</td><td>What to put in the record's body.</td></tr>
  </table>
</dl>
This overwrites the existing bytes, starting at the offset <em>start</em> through the byte at <em>start</em> + <em>data.size()</em>. This method <b>cannot</b> <b>be</b> <b>used</b> to change the size of a record. Attempting this will result in an error. 
</div>
</div><p>
<a class="anchor" name="g959214374f6bc2cc288a0bb5e1aedf5e"></a><!-- doxytag: member="ss_m::update_rec_hdr" ref="g959214374f6bc2cc288a0bb5e1aedf5e" args="(const rid_t &amp;rid, smsize_t start, const vec_t &amp;hdr)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a> ss_m::update_rec_hdr           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>rid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">smsize_t&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>hdr</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Modify the header of an existing record. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rid</em>&nbsp;</td><td>ID of the record to modify. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>start</em>&nbsp;</td><td>First byte to change. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hdr</em>&nbsp;</td><td>What to put in the record's header.</td></tr>
  </table>
</dl>
This overwrites the existing bytes, starting at the offset <em>start</em> through the byte at <em>start</em> + <em>data.size()</em>. This method <b>cannot</b> <b>be</b> <b>used</b> to change the size of a record header. There are no methods for appending to or truncating a record header.<p>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/dda/classpin__i.html#4b32aa30d1e16fa1e902049700db879d">pin_i::update_rec</a>, <a class="el" href="../../d6/dfa/group___s_s_m_p_i_n.html">Pinning Records</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="gc0a68cce342341fb85880207d548fa6d"></a><!-- doxytag: member="ss_m::append_rec" ref="gc0a68cce342341fb85880207d548fa6d" args="(const rid_t &amp;rid, const vec_t &amp;data)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a> ss_m::append_rec           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>rid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Append bytes to a record body. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rid</em>&nbsp;</td><td>ID of the record to modify. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>data</em>&nbsp;</td><td>What to append to the record.</td></tr>
  </table>
</dl>
<dl compact><dt><b>Note:</b></dt><dd>This appends <b>to</b> a record; it does <b>not</b> append a record to a file! </dd></dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/dda/classpin__i.html#90fc843fe0d1103d546218b7200db0e4">pin_i::append_rec</a>, <a class="el" href="../../d6/dfa/group___s_s_m_p_i_n.html">Pinning Records</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="gc857905ab45dd35d8931bcfa8271d8b6"></a><!-- doxytag: member="ss_m::truncate_rec" ref="gc857905ab45dd35d8931bcfa8271d8b6" args="(const rid_t &amp;rid, smsize_t amount)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a> ss_m::truncate_rec           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>rid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">smsize_t&nbsp;</td>
          <td class="paramname"> <em>amount</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Chop bytes off the end of a record body. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rid</em>&nbsp;</td><td>ID of the record to modify. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>amount</em>&nbsp;</td><td>How many bytes to lop off.</td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/dda/classpin__i.html#d3492eec4af68d2dff0797d7a4ca1073">pin_i::truncate_rec</a>, <a class="el" href="../../d6/dfa/group___s_s_m_p_i_n.html">Pinning Records</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="g5ad82e549d449942b89289bc7ab11bf0"></a><!-- doxytag: member="ss_m::truncate_rec" ref="g5ad82e549d449942b89289bc7ab11bf0" args="(const rid_t &amp;rid, smsize_t amount, bool &amp;should_forward)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">static <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a> ss_m::truncate_rec           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>rid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">smsize_t&nbsp;</td>
          <td class="paramname"> <em>amount</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&nbsp;</td>
          <td class="paramname"> <em>should_forward</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [static, inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Chop bytes off the end of a record body. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>rid</em>&nbsp;</td><td>ID of the record to modify. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>amount</em>&nbsp;</td><td>How many bytes to lop off. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>should_forward</em>&nbsp;</td><td>Returns true if the record started out large but is now small as a result of the truncation. This enables a value-added server to take action in this event, should it so desire.</td></tr>
  </table>
</dl>
<dl compact><dt><b>See also:</b></dt><dd><a class="el" href="../../d9/dda/classpin__i.html#d3492eec4af68d2dff0797d7a4ca1073">pin_i::truncate_rec</a>, <a class="el" href="../../d6/dfa/group___s_s_m_p_i_n.html">Pinning Records</a> </dd></dl>

</div>
</div><p>
<a class="anchor" name="g4b1bf5e2948e1c9242ed237b6a45d0a8"></a><!-- doxytag: member="append_file_i::create_rec" ref="g4b1bf5e2948e1c9242ed237b6a45d0a8" args="(const vec_t &amp;hdr, smsize_t len_hint, const vec_t &amp;data, rid_t &amp;rid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a> append_file_i::create_rec           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>hdr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">smsize_t&nbsp;</td>
          <td class="paramname"> <em>len_hint</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>data</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>rid</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inherited]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Append a new record to the end of the file. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>hdr</em>&nbsp;</td><td>The client-defined record header. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>len_hint</em>&nbsp;</td><td>The length of the record, more or less. More accuracy here helps the sm reduce its work. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>data</em>&nbsp;</td><td>The client-defined record contents. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>rid</em>&nbsp;</td><td>The identifier of the new record. </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr size="1"><address style="align: right;"><small>Generated on Mon Jan 2 15:14:01 2012 for Shore Storage Manager by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
