<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Shore Storage Manager: append_file_i Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="../../modules.html"><span>Modules</span></a></li>
    <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="../../classes.html"><span>Classes</span></a></li>
    <li><a href="../../files.html"><span>Files</span></a></li>
    <li><a href="../../dirs.html"><span>Directories</span></a></li>
    <li><a href="../../pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="../../examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="../../classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="../../hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>append_file_i Class Reference</h1><!-- doxytag: class="append_file_i" --><!-- doxytag: inherits="scan_file_i" -->Inherits <a class="el" href="../../db/d9c/classscan__file__i.html">scan_file_i</a>.
<p>
Inheritance diagram for append_file_i:<p><center><img src="../../df/d2e/classappend__file__i__inherit__graph.png" border="0" usemap="#dd/d75/append__file__i__inherit__map" alt="Inheritance graph"></center>
<map name="dd/d75/append__file__i__inherit__map">
<area href="../../db/d9c/classscan__file__i.html" shape="rect" coords="14,5,103,32" alt="">
</map>
<center><font size="2">[<a target="top" href="../../graph_legend.html">legend</a>]</font></center>Collaboration diagram for append_file_i:<p><center><img src="../../d3/d50/classappend__file__i__coll__graph.png" border="0" usemap="#d5/d5a/append__file__i__coll__map" alt="Collaboration graph"></center>
<map name="d5/d5a/append__file__i__coll__map">
<area href="../../db/d9c/classscan__file__i.html" shape="rect" coords="263,611,352,637" alt="">
<area href="../../da/d5b/structstid__t.html" shape="rect" coords="247,200,301,227" alt="">
<area href="../../d5/d47/classlpid__t.html" shape="rect" coords="210,299,264,325" alt="">
<area href="../../d8/d90/classw__hashing_1_1hash2.html" shape="rect" coords="205,109,344,136" alt="">
<area href="../../dc/d6c/classw__hashing_1_1uhash.html" shape="rect" coords="205,5,344,32" alt="">
<area href="../../d1/d4b/structfill2.html" shape="rect" coords="137,109,180,136" alt="">
<area href="../../d7/df5/classrid__t.html" shape="rect" coords="134,419,183,445" alt="">
<area href="../../d3/d3f/structvid__t.html" shape="rect" coords="369,109,420,136" alt="">
<area href="../../d9/dda/classpin__i.html" shape="rect" coords="83,519,133,545" alt="">
<area href="../../d2/d19/classlsn__t.html" shape="rect" coords="5,419,56,445" alt="">
<area href="../../d8/d12/classtid__t.html" shape="rect" coords="387,519,435,545" alt="">
<area href="../../db/dc7/classw__rc__t.html" shape="rect" coords="509,519,573,545" alt="">
<area href="../../dc/dc2/classw__error__t.html" shape="rect" coords="501,419,581,445" alt="">
<area href="../../d9/da0/classw__base__t.html" shape="rect" coords="443,299,524,325" alt="">
<area href="../../d0/d10/structw__error__info__t.html" shape="rect" coords="550,299,663,325" alt="">
</map>
<center><font size="2">[<a target="top" href="../../graph_legend.html">legend</a>]</font></center><a href="../../de/d00/classappend__file__i-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Pseudo-iterator used to append to a file. 
<p>
Just creating a record doesn't ensure that it appears at the end of the file; when new pages are allocated, they could be in extents in the middle of the file, and unused slots in pages in the middle of the file can be scavenged for create_rec.<p>
If you want to ensure that the records are appended to a file, use this.<p>
<dl compact><dt><b>Attention:</b></dt><dd>Clearly, this cannot be used in a meaningful way when other threads are updating the same file. The constructor acquires an exclusive lock on the file to protect it from updates by other transactions, but this does not protect it from updates from other threads in the same transaction. The server must ensure that no more than one thread attached to the locking transaction is using the file, and that the only use of the file is through the <a class="el" href="../../dd/d13/classappend__file__i.html">append_file_i</a> while the instance exists. </dd></dl>

<p>

<p>
Definition at line <a class="el" href="../../df/d8a/scan_8h-source.html#l00608">608</a> of file <a class="el" href="../../df/d8a/scan_8h-source.html">scan.h</a>.<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d13/classappend__file__i.html#ef7bfc253f7ac3e936e8eabcc196b92b">append_file_i</a> (const <a class="el" href="../../da/d5b/structstid__t.html">stid_t</a> &amp;<a class="el" href="../../db/d9c/classscan__file__i.html#d3ec5826eb015dddd3454a3aa90c43ba">stid</a>)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct an <a class="el" href="../../dd/d13/classappend__file__i.html">append_file_i</a> for a given file.  <a href="#ef7bfc253f7ac3e936e8eabcc196b92b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../dd/d13/classappend__file__i.html#12c29f17e74cda2ac7e998b4d2481b8b">next</a> (<a class="el" href="../../d9/dda/classpin__i.html">pin_i</a> *&amp;pin_ptr, smsize_t start_offset, bool &amp;eof)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Place-holder method. Returns error.  <a href="#12c29f17e74cda2ac7e998b4d2481b8b"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d8/db0/group___s_s_m_f_i_l_e.html#g4b1bf5e2948e1c9242ed237b6a45d0a8">create_rec</a> (const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;hdr, smsize_t len_hint, const <a class="el" href="../../d8/ddb/classvec__t.html">vec_t</a> &amp;data, <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;rid)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Append a new record to the end of the file.  <a href="../../d8/db0/group___s_s_m_f_i_l_e.html#g4b1bf5e2948e1c9242ed237b6a45d0a8"></a><br></td></tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="ef7bfc253f7ac3e936e8eabcc196b92b"></a><!-- doxytag: member="append_file_i::append_file_i" ref="ef7bfc253f7ac3e936e8eabcc196b92b" args="(const stid_t &amp;stid)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NORET append_file_i::append_file_i           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../da/d5b/structstid__t.html">stid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>stid</em>          </td>
          <td>&nbsp;)&nbsp;</td>
          <td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct an <a class="el" href="../../dd/d13/classappend__file__i.html">append_file_i</a> for a given file. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>stid</em>&nbsp;</td><td>ID of the file in which to create records. </td></tr>
  </table>
</dl>

</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="12c29f17e74cda2ac7e998b4d2481b8b"></a><!-- doxytag: member="append_file_i::next" ref="12c29f17e74cda2ac7e998b4d2481b8b" args="(pin_i *&amp;pin_ptr, smsize_t start_offset, bool &amp;eof)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a> append_file_i::next           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/dda/classpin__i.html">pin_i</a> *&amp;&nbsp;</td>
          <td class="paramname"> <em>pin_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">smsize_t&nbsp;</td>
          <td class="paramname"> <em>start_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&nbsp;</td>
          <td class="paramname"> <em>eof</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Place-holder method. Returns error. 
<p>
You cannot scan with an <a class="el" href="../../dd/d13/classappend__file__i.html">append_file_i</a>. 
<p>
Reimplemented from <a class="el" href="../../db/d9c/classscan__file__i.html#d639c6495273e5c33e9940a28ee072de">scan_file_i</a>.
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>src/sm/<a class="el" href="../../df/d8a/scan_8h-source.html">scan.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Jan 2 15:14:02 2012 for Shore Storage Manager by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
