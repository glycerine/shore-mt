<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>Shore Storage Manager: scan_file_i Class Reference</title>
<link href="../../doxygen.css" rel="stylesheet" type="text/css">
<link href="../../tabs.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.4.7 -->
<div class="tabs">
  <ul>
    <li><a href="../../main.html"><span>Main&nbsp;Page</span></a></li>
    <li><a href="../../modules.html"><span>Modules</span></a></li>
    <li><a href="../../namespaces.html"><span>Namespaces</span></a></li>
    <li id="current"><a href="../../classes.html"><span>Classes</span></a></li>
    <li><a href="../../files.html"><span>Files</span></a></li>
    <li><a href="../../dirs.html"><span>Directories</span></a></li>
    <li><a href="../../pages.html"><span>Related&nbsp;Pages</span></a></li>
    <li><a href="../../examples.html"><span>Examples</span></a></li>
    <li>
      <form action="search.php" method="get">
        <table cellspacing="0" cellpadding="0" border="0">
          <tr>
            <td><label>&nbsp;<u>S</u>earch&nbsp;for&nbsp;</label></td>
            <td><input type="text" name="query" value="" size="20" accesskey="s"/></td>
          </tr>
        </table>
      </form>
    </li>
  </ul></div>
<div class="tabs">
  <ul>
    <li><a href="../../classes.html"><span>Alphabetical&nbsp;List</span></a></li>
    <li><a href="../../annotated.html"><span>Class&nbsp;List</span></a></li>
    <li><a href="../../hierarchy.html"><span>Class&nbsp;Hierarchy</span></a></li>
    <li><a href="../../functions.html"><span>Class&nbsp;Members</span></a></li>
  </ul></div>
<h1>scan_file_i Class Reference<br>
<small>
[<a class="el" href="../../d3/d29/group___s_s_m_s_c_a_n_f.html">Scanning Files</a>]</small>
</h1><!-- doxytag: class="scan_file_i" --><!-- doxytag: inherits="smlevel_top,xct_dependent_t" -->Inherits smlevel_top, and xct_dependent_t.
<p>
Inherited by <a class="el" href="../../dd/d13/classappend__file__i.html">append_file_i</a>.
<p>
Inheritance diagram for scan_file_i:<p><center><img src="../../d7/d17/classscan__file__i__inherit__graph.png" border="0" usemap="#d3/d22/scan__file__i__inherit__map" alt="Inheritance graph"></center>
<map name="d3/d22/scan__file__i__inherit__map">
<area href="../../dd/d13/classappend__file__i.html" shape="rect" coords="5,80,112,107" alt="">
</map>
<center><font size="2">[<a target="top" href="../../graph_legend.html">legend</a>]</font></center>Collaboration diagram for scan_file_i:<p><center><img src="../../d8/dc0/classscan__file__i__coll__graph.png" border="0" usemap="#da/d7c/scan__file__i__coll__map" alt="Collaboration graph"></center>
<map name="da/d7c/scan__file__i__coll__map">
<area href="../../da/d5b/structstid__t.html" shape="rect" coords="247,200,301,227" alt="">
<area href="../../d5/d47/classlpid__t.html" shape="rect" coords="210,299,264,325" alt="">
<area href="../../d8/d90/classw__hashing_1_1hash2.html" shape="rect" coords="205,109,344,136" alt="">
<area href="../../dc/d6c/classw__hashing_1_1uhash.html" shape="rect" coords="205,5,344,32" alt="">
<area href="../../d1/d4b/structfill2.html" shape="rect" coords="137,109,180,136" alt="">
<area href="../../d7/df5/classrid__t.html" shape="rect" coords="134,419,183,445" alt="">
<area href="../../d3/d3f/structvid__t.html" shape="rect" coords="369,109,420,136" alt="">
<area href="../../d9/dda/classpin__i.html" shape="rect" coords="83,519,133,545" alt="">
<area href="../../d2/d19/classlsn__t.html" shape="rect" coords="5,419,56,445" alt="">
<area href="../../d8/d12/classtid__t.html" shape="rect" coords="387,519,435,545" alt="">
<area href="../../db/dc7/classw__rc__t.html" shape="rect" coords="509,519,573,545" alt="">
<area href="../../dc/dc2/classw__error__t.html" shape="rect" coords="501,419,581,445" alt="">
<area href="../../d9/da0/classw__base__t.html" shape="rect" coords="443,299,524,325" alt="">
<area href="../../d0/d10/structw__error__info__t.html" shape="rect" coords="550,299,663,325" alt="">
</map>
<center><font size="2">[<a target="top" href="../../graph_legend.html">legend</a>]</font></center><a href="../../de/d7e/classscan__file__i-members.html">List of all members.</a><hr><a name="_details"></a><h2>Detailed Description</h2>
Iterator over a file of records. 
<p>
To iterate over the records in a file, construct an instance of this class, and use its next, next_page and eof methods to located the records in the file. The methods next and next_page return a <a class="el" href="../../d9/dda/classpin__i.html">pin_i</a>, which lets you manipulate the record (pin it in the buffer pool while you use it). It is unwise to delete or insert records while you have a scan open on the file (in the same transaction).<p>
<div class="fragment"><pre class="fragment"> <a class="code" href="../../da/d5b/structstid__t.html">stid_t</a> fid(1,7);
 <a class="code" href="../../db/d9c/classscan__file__i.html">scan_file_i</a> scan(fid);
 <a class="code" href="../../d9/dda/classpin__i.html">pin_i</a>*      <a class="code" href="../../db/d9c/classscan__file__i.html#b8cb6f56a6eac468ca1bf47186b074fc">cursor</a>(NULL);
 <span class="keywordtype">bool</span>        <a class="code" href="../../db/d9c/classscan__file__i.html#2b4e0dfd5192e6c766abfe74d1753615">eof</a>(<span class="keyword">false</span>);
 <span class="keywordflow">do</span> {
    <a class="code" href="../../db/dc7/classw__rc__t.html">w_rc_t</a> rc = scan.next(<a class="code" href="../../db/d9c/classscan__file__i.html#b8cb6f56a6eac468ca1bf47186b074fc">cursor</a>, 0, eof);
    <span class="keywordflow">if</span>(rc.<a class="code" href="../../db/dc7/classw__rc__t.html#a1c11327f611544881a9e1314c67f9ad">is_error</a>()) {
       <span class="comment">// handle error</span>
       ...
    }
    <span class="keywordflow">if</span>(eof) <span class="keywordflow">break</span>;
    <span class="comment">// handle record</span>
    ...
    <span class="keyword">const</span> <span class="keywordtype">char</span> *body = <a class="code" href="../../db/d9c/classscan__file__i.html#b8cb6f56a6eac468ca1bf47186b074fc">cursor</a>-&gt;body();
    ...
 } <span class="keywordflow">while</span> (1);
</pre></div> <dl compact><dt><b>Examples: </b></dt><dd>

<p>
<a class="el" href="../../df/d97/create__rec_8cpp-example.html#_a36">create_rec.cpp</a>, and <a class="el" href="../../d6/d97/sort__stream_8cpp-example.html#_a136">sort_stream.cpp</a>.</dl>
<p>

<p>
Definition at line <a class="el" href="../../df/d8a/scan_8h-source.html#l00437">437</a> of file <a class="el" href="../../df/d8a/scan_8h-source.html">scan.h</a>.<table border="0" cellpadding="0" cellspacing="0">
<tr><td></td></tr>
<tr><td colspan="2"><br><h2>Public Member Functions</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#1a335abb45dfda22c4452858266373df">scan_file_i</a> (const <a class="el" href="../../da/d5b/structstid__t.html">stid_t</a> &amp;<a class="el" href="../../db/d9c/classscan__file__i.html#d3ec5826eb015dddd3454a3aa90c43ba">stid</a>, const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;start, <a class="el" href="../../de/d81/sm__base_8h.html#8a4ace36542f82f7a5e908a7df721a57">concurrency_t</a> cc=t_cc_file, bool prefetch=false, lock_mode_t ignored=SH)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct an iterator over the given store (file).  <a href="#1a335abb45dfda22c4452858266373df"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">NORET&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#45faaa8bde76417c3fb97eddfc7b4058">scan_file_i</a> (const <a class="el" href="../../da/d5b/structstid__t.html">stid_t</a> &amp;<a class="el" href="../../db/d9c/classscan__file__i.html#d3ec5826eb015dddd3454a3aa90c43ba">stid</a>, <a class="el" href="../../de/d81/sm__base_8h.html#8a4ace36542f82f7a5e908a7df721a57">concurrency_t</a> cc=t_cc_file, bool prefetch=false, lock_mode_t ignored=SH)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Construct an iterator over the given store (file).  <a href="#45faaa8bde76417c3fb97eddfc7b4058"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top">void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#b8cb6f56a6eac468ca1bf47186b074fc">cursor</a> (<a class="el" href="../../d9/dda/classpin__i.html">pin_i</a> *&amp;pin_ptr, bool &amp;eof)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Return the <a class="el" href="../../d9/dda/classpin__i.html">pin_i</a> that represents the scan state.  <a href="#b8cb6f56a6eac468ca1bf47186b074fc"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#d639c6495273e5c33e9940a28ee072de">next</a> (<a class="el" href="../../d9/dda/classpin__i.html">pin_i</a> *&amp;pin_ptr, smsize_t start_offset, bool &amp;eof)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Advance to the next record of the file.  <a href="#d639c6495273e5c33e9940a28ee072de"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#4a1794a0ea19d0ebaa7bde9ea3274f2d">next_page</a> (<a class="el" href="../../d9/dda/classpin__i.html">pin_i</a> *&amp;pin_ptr, smsize_t start_offset, bool &amp;eof)</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Advance to the first record on the next page in the file.  <a href="#4a1794a0ea19d0ebaa7bde9ea3274f2d"></a><br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="43b3256a2937dfc930ffd99412d27200"></a><!-- doxytag: member="scan_file_i::finish" ref="43b3256a2937dfc930ffd99412d27200" args="()" -->
void&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#43b3256a2937dfc930ffd99412d27200">finish</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Free resources acquired by this iterator. Useful if you are finished with the scan but not ready to delete it. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="2b4e0dfd5192e6c766abfe74d1753615"></a><!-- doxytag: member="scan_file_i::eof" ref="2b4e0dfd5192e6c766abfe74d1753615" args="()" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#2b4e0dfd5192e6c766abfe74d1753615">eof</a> ()</td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">End of file was reached. Cursor is not usable. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="9cae5577d86acb8d19b95a5f0adf625f"></a><!-- doxytag: member="scan_file_i::error_code" ref="9cae5577d86acb8d19b95a5f0adf625f" args="() const " -->
const <a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a> &amp;&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#9cae5577d86acb8d19b95a5f0adf625f">error_code</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">Error code returned from last method call. <br></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="07bc5e2033e96f8367ad144709c518c5"></a><!-- doxytag: member="scan_file_i::xid" ref="07bc5e2033e96f8367ad144709c518c5" args="() const " -->
<a class="el" href="../../d8/d12/classtid__t.html">tid_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#07bc5e2033e96f8367ad144709c518c5">xid</a> () const </td></tr>

<tr><td class="mdescLeft">&nbsp;</td><td class="mdescRight">ID of the transaction that created this iterator. <br></td></tr>
<tr><td colspan="2"><br><h2>Public Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="d3ec5826eb015dddd3454a3aa90c43ba"></a><!-- doxytag: member="scan_file_i::stid" ref="d3ec5826eb015dddd3454a3aa90c43ba" args="" -->
<a class="el" href="../../da/d5b/structstid__t.html">stid_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#d3ec5826eb015dddd3454a3aa90c43ba">stid</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="49076e6beb8446df4a714b8a1b365302"></a><!-- doxytag: member="scan_file_i::curr_rid" ref="49076e6beb8446df4a714b8a1b365302" args="" -->
<a class="el" href="../../d7/df5/classrid__t.html">rid_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#49076e6beb8446df4a714b8a1b365302">curr_rid</a></td></tr>

<tr><td colspan="2"><br><h2>Protected Attributes</h2></td></tr>
<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="56a40cc5b6353cc82fe44171a8d4b92c"></a><!-- doxytag: member="scan_file_i::tid" ref="56a40cc5b6353cc82fe44171a8d4b92c" args="" -->
<a class="el" href="../../d8/d12/classtid__t.html">tid_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#56a40cc5b6353cc82fe44171a8d4b92c">tid</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="24c63b92694e7f2757dfff2496f300a1"></a><!-- doxytag: member="scan_file_i::_eof" ref="24c63b92694e7f2757dfff2496f300a1" args="" -->
bool&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#24c63b92694e7f2757dfff2496f300a1">_eof</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ae53a5c5283a7febefc1e2c08884823a"></a><!-- doxytag: member="scan_file_i::_error_occurred" ref="ae53a5c5283a7febefc1e2c08884823a" args="" -->
<a class="el" href="../../db/dc7/classw__rc__t.html">w_rc_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#ae53a5c5283a7febefc1e2c08884823a">_error_occurred</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="f0f65401933f987d7087082e4d2880a5"></a><!-- doxytag: member="scan_file_i::_cursor" ref="f0f65401933f987d7087082e4d2880a5" args="" -->
<a class="el" href="../../d9/dda/classpin__i.html">pin_i</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#f0f65401933f987d7087082e4d2880a5">_cursor</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="75beb1d7fe9a9e21b12f65eb56e6fc6b"></a><!-- doxytag: member="scan_file_i::_next_pid" ref="75beb1d7fe9a9e21b12f65eb56e6fc6b" args="" -->
<a class="el" href="../../d5/d47/classlpid__t.html">lpid_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#75beb1d7fe9a9e21b12f65eb56e6fc6b">_next_pid</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="ceaaab524d1bfd14601afdc5d69b90c7"></a><!-- doxytag: member="scan_file_i::_cc" ref="ceaaab524d1bfd14601afdc5d69b90c7" args="" -->
<a class="el" href="../../de/d81/sm__base_8h.html#8a4ace36542f82f7a5e908a7df721a57">concurrency_t</a>&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#ceaaab524d1bfd14601afdc5d69b90c7">_cc</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="4a0807e702a0b4e52b57b71243962f4b"></a><!-- doxytag: member="scan_file_i::_page_lock_mode" ref="4a0807e702a0b4e52b57b71243962f4b" args="" -->
lock_mode_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#4a0807e702a0b4e52b57b71243962f4b">_page_lock_mode</a></td></tr>

<tr><td class="memItemLeft" nowrap align="right" valign="top"><a class="anchor" name="126ab2d7e881b2183b0d2343080b9b5e"></a><!-- doxytag: member="scan_file_i::_rec_lock_mode" ref="126ab2d7e881b2183b0d2343080b9b5e" args="" -->
lock_mode_t&nbsp;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../db/d9c/classscan__file__i.html#126ab2d7e881b2183b0d2343080b9b5e">_rec_lock_mode</a></td></tr>

</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a class="anchor" name="1a335abb45dfda22c4452858266373df"></a><!-- doxytag: member="scan_file_i::scan_file_i" ref="1a335abb45dfda22c4452858266373df" args="(const stid_t &amp;stid, const rid_t &amp;start, concurrency_t cc=t_cc_file, bool prefetch=false, lock_mode_t ignored=SH)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NORET scan_file_i::scan_file_i           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../da/d5b/structstid__t.html">stid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>stid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d7/df5/classrid__t.html">rid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>start</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d81/sm__base_8h.html#8a4ace36542f82f7a5e908a7df721a57">concurrency_t</a>&nbsp;</td>
          <td class="paramname"> <em>cc</em> = <code>t_cc_file</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>prefetch</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lock_mode_t&nbsp;</td>
          <td class="paramname"> <em>ignored</em> = <code>SH</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct an iterator over the given store (file). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>stid</em>&nbsp;</td><td>ID of the file over which to iterate. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>start</em>&nbsp;</td><td>ID of the first record of interest, can be used to start a scan in the middle of the file. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cc</em>&nbsp;</td><td>Locking granularity to be used. See discussion for other constructor. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>prefetch</em>&nbsp;</td><td>If true, a background thread will pre-fetch pages in support of this scan. For this to work the server option sm_prefetch must be enabled. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ignored</em>&nbsp;</td><td><em>not</em> used</td></tr>
  </table>
</dl>
Record-level locking is not supported here because there are problems with phantoms if another transaction is altering the file while this scan is going on. Thus, if you try to use record-level locking, you will get page-level locking instead. 
</div>
</div><p>
<a class="anchor" name="45faaa8bde76417c3fb97eddfc7b4058"></a><!-- doxytag: member="scan_file_i::scan_file_i" ref="45faaa8bde76417c3fb97eddfc7b4058" args="(const stid_t &amp;stid, concurrency_t cc=t_cc_file, bool prefetch=false, lock_mode_t ignored=SH)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">NORET scan_file_i::scan_file_i           </td>
          <td>(</td>
          <td class="paramtype">const <a class="el" href="../../da/d5b/structstid__t.html">stid_t</a> &amp;&nbsp;</td>
          <td class="paramname"> <em>stid</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="../../de/d81/sm__base_8h.html#8a4ace36542f82f7a5e908a7df721a57">concurrency_t</a>&nbsp;</td>
          <td class="paramname"> <em>cc</em> = <code>t_cc_file</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&nbsp;</td>
          <td class="paramname"> <em>prefetch</em> = <code>false</code>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">lock_mode_t&nbsp;</td>
          <td class="paramname"> <em>ignored</em> = <code>SH</code></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Construct an iterator over the given store (file). 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>stid</em>&nbsp;</td><td>ID of the file over which to iterate. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>cc</em>&nbsp;</td><td>Locking granularity to be used. The following are permissible, and their implied store, page and record lock modes are given:<ul>
<li>t_cc_none : store - IS page - none record - none</li><li>t_cc_record : store - IS page - SH record - none</li><li>t_cc_page : store - IS page - SH record - none</li><li>t_cc_append : store - IX page - EX record - EX</li><li>t_cc_file : store - SH page - none record - none </li></ul>
</td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>prefetch</em>&nbsp;</td><td>If true, a background thread will pre-fetch pages in support of this scan. For this to work the server option sm_prefetch must be enabled. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>ignored</em>&nbsp;</td><td><em>not</em> used</td></tr>
  </table>
</dl>
Record-level locking is not supported here because there are problems with phantoms if another transaction is altering the file while this scan is going on. Thus, if you try to use record-level locking, you will get page-level locking instead. 
</div>
</div><p>
<hr><h2>Member Function Documentation</h2>
<a class="anchor" name="b8cb6f56a6eac468ca1bf47186b074fc"></a><!-- doxytag: member="scan_file_i::cursor" ref="b8cb6f56a6eac468ca1bf47186b074fc" args="(pin_i *&amp;pin_ptr, bool &amp;eof)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void scan_file_i::cursor           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/dda/classpin__i.html">pin_i</a> *&amp;&nbsp;</td>
          <td class="paramname"> <em>pin_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&nbsp;</td>
          <td class="paramname"> <em>eof</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"><code> [inline]</code></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Return the <a class="el" href="../../d9/dda/classpin__i.html">pin_i</a> that represents the scan state. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>pin_ptr</em>&nbsp;</td><td>Populate the caller's pointer. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>eof</em>&nbsp;</td><td>False if the <a class="el" href="../../d9/dda/classpin__i.html">pin_i</a> points to a record, true if there were no next record to pin. </td></tr>
  </table>
</dl>

<p>
Definition at line <a class="el" href="../../df/d8a/scan_8h-source.html#l00502">502</a> of file <a class="el" href="../../df/d8a/scan_8h-source.html">scan.h</a>.
<p>
References <a class="el" href="../../db/d9c/classscan__file__i.html#f0f65401933f987d7087082e4d2880a5">_cursor</a>, and <a class="el" href="../../db/d9c/classscan__file__i.html#24c63b92694e7f2757dfff2496f300a1">_eof</a>.
</div>
</div><p>
<a class="anchor" name="d639c6495273e5c33e9940a28ee072de"></a><!-- doxytag: member="scan_file_i::next" ref="d639c6495273e5c33e9940a28ee072de" args="(pin_i *&amp;pin_ptr, smsize_t start_offset, bool &amp;eof)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a> scan_file_i::next           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/dda/classpin__i.html">pin_i</a> *&amp;&nbsp;</td>
          <td class="paramname"> <em>pin_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">smsize_t&nbsp;</td>
          <td class="paramname"> <em>start_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&nbsp;</td>
          <td class="paramname"> <em>eof</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Advance to the next record of the file. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>pin_ptr</em>&nbsp;</td><td>Populate the caller's pointer. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>start_offset</em>&nbsp;</td><td>Pin the next record at this offset. Meaningful only for large records. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>eof</em>&nbsp;</td><td>False if the <a class="el" href="../../d9/dda/classpin__i.html">pin_i</a> points to a record, true if there were no next record to pin.</td></tr>
  </table>
</dl>
This must be called once to get the first record of the file. 
<p>
Reimplemented in <a class="el" href="../../dd/d13/classappend__file__i.html#12c29f17e74cda2ac7e998b4d2481b8b">append_file_i</a>.
</div>
</div><p>
<a class="anchor" name="4a1794a0ea19d0ebaa7bde9ea3274f2d"></a><!-- doxytag: member="scan_file_i::next_page" ref="4a1794a0ea19d0ebaa7bde9ea3274f2d" args="(pin_i *&amp;pin_ptr, smsize_t start_offset, bool &amp;eof)" -->
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../db/dc7/classw__rc__t.html">rc_t</a> scan_file_i::next_page           </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../d9/dda/classpin__i.html">pin_i</a> *&amp;&nbsp;</td>
          <td class="paramname"> <em>pin_ptr</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">smsize_t&nbsp;</td>
          <td class="paramname"> <em>start_offset</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool &amp;&nbsp;</td>
          <td class="paramname"> <em>eof</em></td><td>&nbsp;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td><td width="100%"></td>
        </tr>
      </table>
</div>
<div class="memdoc">

<p>
Advance to the first record on the next page in the file. 
<p>
<dl compact><dt><b>Parameters:</b></dt><dd>
  <table border="0" cellspacing="2" cellpadding="0">
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>pin_ptr</em>&nbsp;</td><td>Populate the caller's pointer. This <a class="el" href="../../d9/dda/classpin__i.html">pin_i</a> represents the state of this scan. </td></tr>
    <tr><td valign="top"><tt>[in]</tt>&nbsp;</td><td valign="top"><em>start_offset</em>&nbsp;</td><td>Pin the next record at this offset. This is meaningful only for large records. </td></tr>
    <tr><td valign="top"><tt>[out]</tt>&nbsp;</td><td valign="top"><em>eof</em>&nbsp;</td><td>False if the <a class="el" href="../../d9/dda/classpin__i.html">pin_i</a> points to a record, true if there were no next record to pin.</td></tr>
  </table>
</dl>
If next_page is called after the <a class="el" href="../../db/d9c/classscan__file__i.html">scan_file_i</a> is initialized it will advance the cursor to the first record in the file, just as <a class="el" href="../../db/d9c/classscan__file__i.html#d639c6495273e5c33e9940a28ee072de">next()</a> would do. 
</div>
</div><p>
<hr>The documentation for this class was generated from the following file:<ul>
<li>src/sm/<a class="el" href="../../df/d8a/scan_8h-source.html">scan.h</a></ul>
<hr size="1"><address style="align: right;"><small>Generated on Mon Jan 2 15:14:12 2012 for Shore Storage Manager by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img src="../../doxygen.png" alt="doxygen" align="middle" border="0"></a> 1.4.7 </small></address>
</body>
</html>
