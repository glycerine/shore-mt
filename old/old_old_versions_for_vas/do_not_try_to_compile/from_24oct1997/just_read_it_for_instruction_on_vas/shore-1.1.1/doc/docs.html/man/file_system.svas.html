<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:41:00 CST 1997 from file mansvas/file_system.svas -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
filesystem(svas) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
file_system - Shore registered objects
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.2">ENVIRONMENT</A>
</LI>
<LI>
<A HREF="#HRR.3">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.4">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.5">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.6">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">DESCRIPTION</A></H1>
A Shore file system looks much like a Unix file system.
A file system corresponds to a 
<em>volume,</em>
which is a
<em>device,</em>
such as a raw disk or 
a Unix file.
On each volume is a hierarchically named
set of objects.
At the top of the hierarchy  is an unnamed
object, called the 
<em>root</em>
of the volume.
The root is given a name when the volume is 
<em>mounted,</em>
the means by which the data on the volume are
made available for use.
<P>
A Unix file system contains both named and unnamed 
or 
<A HREF="pool.svas.html">anonymous</A>
objects.
Named objects are called 
<em>registered</em>
object.
All Shore objects have
<em>type,</em>
and file system objects are no 
exception.
Registered objects can have these types:
<DL>
<DT>Directory</DT><DD>
A directory in Shore is the same as a Unix directory.
It contains hard links to the objects it &quot;contains.&quot;
</DD>
<DT>Symbolic link</DT><DD>
A symbolic link in Shore is like a Unix symbolic link.
It is a path name.  It may dangle, and 
it may cross file system.
</DD>
<DT>Cross reference</DT><DD>
Cross references have no Unix analog.
A cross reference is an object that, like a symbolic link,
points to another object, but the value stored in a cross
reference is not a path, but an object identifier.
The object referenced may be anonymous or registered.
A cross reference can dangle if the target is deleted after
the cross reference is made.
A cross reference may address an object on another file system.
</DD>
<DT>Pool</DT><DD>
A pool has no analog in Unix.
A pool is an object that identifies a
place in which anonymous objects &quot;reside&quot;.
A pool can be scanned to identify or read all the objects in it.
</DD>
<DT>User-defined</DT><DD>
Objects whose type is defined by an application or &quot;user&quot;,
can be registered or anonymous.
</DD>
<DT>Unix file</DT><DD>
Registered objects whose types have an attribute of type TEXT
are accessible through the NFS server portion of the
SVASVAS, regardless of what other attributes their types have.
Objects that are created by the NFS server are given the
type &quot;Unix file&quot; which has only a single attribute, of type TEXT.
All &quot;Unix file&quot; are registered.
<P>
</DD>
</DL>
Shore also has hard links, as in Unix.
There is no type for a hard link, because
a hard link is not an object's type.
It is a reference to an object.
There can be many links to a Shore (registered) object.
Each registered object contains a reference count for the
number of links to the object. 
An object is deleted only when its reference count
reaches zero.
A hard link always points to an object; it never dangles.
Hard links cannot cross file system boundaries.
<P>
All registered objects reside in the same
Storage Manager 
<A HREF="intro.ssm.html">file.</A>
Anonymous objects reside a Storage Manager
files associated with their pools.
<P>
Path names, symbolic links, and cross references are followed and
expanded much as in Unix, and there are limits to the length
of a path, both before and after expansion of symbolic links.
The SVAS takes its limits from the operating system on which it
is running.
The following limits are used, and their values
are taken from sysconf(), pathconf(), or compile-time
constants as described below:
<DL>
<DT>OpenMax</DT><DD>
The maximum number of open files is taken from 
<em>sysconf(_SC_OPEN_MAX),</em>
if it is available, otherwise from 
<em>getdtablesize(),</em>
if it is available, otherwise from
constants in the operating system include files.
OpenMax is used internally for several purposes:
it limits the number of shared-memory pages that a client
can share with a SVAS (to facilitate communication),
and it limits the number of clients a server can 
serve at any one time.
</DD>
<DT>LinksMax</DT><DD>
The maximum number of links to an object is taken from
pathconf, if it is available, otherwise from 
constants in the operating system include files.
</DD>
<DT>SymlinksMax</DT><DD>
This is the maximum number of symbolic links that will be expanded
in a single attempt to follow a path.
It is taken from 
constants in the operating system include files,
if available, otherwise 20 is used.
The purpose of this is to avoid looping forever if
a symbolic link references itself, directly or indirectly.
</DD>
<DT>PathMax</DT><DD>
This is 
the maximum length of a path, in characters, after expanding symbolic links.
Its value is taken from 
pathconf, if it is available, otherwise from 
constants in the operating system include files,
if available, otherwise its value is 1024.
</DD>
<DT>NameMax</DT><DD>
The maximum length of a register object's file name
is taken from 
pathconf, 
if available, otherwise its value is 255.
<P>
</DD>
</DL>
All values taken from pathconf() are relative
to the Unix root directory (&quot;/&quot;).
<HR>
<H1><A NAME="HRR.2">ENVIRONMENT</A></H1>
Directories, cross references, symbolic links, and
pools are never copied into the application's address space.
All operations on these objects are performed on the server.
Objects of user-defined types and Unix file objects can be
copied into the application's address space by a
<em>readObj</em>
operation.
<HR>
<H1><A NAME="HRR.3">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.4">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.5">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.6">SEE ALSO</A></H1>
<A HREF="mount.svas.html"><STRONG>mount(svas)</STRONG></A>,
<A HREF="pool.svas.html"><STRONG>pool(svas)</STRONG></A>,
<A HREF="readObj.svas.html"><STRONG>readObj(svas)</STRONG></A>,
and
<A HREF="text.svas.html"><STRONG>text(svas)</STRONG></A>.
</BODY>
</HTML>
