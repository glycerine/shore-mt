<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:41:02 CST 1997 from file mansvas/options.svas -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
options(svas) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
options - configuration options used by the Shore Value-Added Server
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">EXAMPLE CONFIGURATION FILE ENTRIES</A>
</LI>
<LI>
<A HREF="#HRR.4">EXAMPLE COMMAND LINE ARGUMENTS</A>
</LI>
<LI>
<A HREF="#HRR.5">SERVER OPTIONS</A>
</LI>
<LI>
<A HREF="#HRR.6">SHUTDOWN OPTIONS</A>
</LI>
<LI>
<A HREF="#HRR.7">CLIENT LIBRARY OPTIONS</A>
</LI>
<LI>
<A HREF="#HRR.8">OBJECT CACHE OPTIONS</A>
</LI>
<LI>
<A HREF="#HRR.9">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.10">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.11">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.12">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
setenv SHORE_RC configuration-file

svas_option_name:  value
</PRE></BLOCKQUOTE>

<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>

Each of the following options must appear on the command line
or in a configuration file.
On the command line, each option is prepended with a dash ('-');
in a configuration file, it is prepended by a 
<em>type,</em>
a 
<em>class,</em>
and a 
<em>program name</em>
 (in the style of X configuration options).

<P>
For applications,
the 
<em>type</em>
is &quot;shore&quot;,
and the 
<em>class</em>
and 
<em>program name</em>
are determined by the 
application.

<P>
For the server,
the 
<em>type</em>
is &quot;shore&quot;,
the 
<em>class</em>
is &quot;server&quot;,
and 
<em>program name</em>
 is the name of the program's 
executable file (&quot;shore&quot; if it is run as made in the source tree).

<P>
Wild cards &quot;?&quot; and &quot;*&quot; may be used as with X configuration options.
<P>
<HR>
<H1><A NAME="HRR.3">EXAMPLE CONFIGURATION FILE ENTRIES</A></H1>
Examples are:
<BLOCKQUOTE><PRE>
shore.server.shore.sm_logdir: ./log
?.server.shore.sm_logdir: ./log
shore.server.?.sm_logdir: ./log
*.sm_logdir: ./log
</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.4">EXAMPLE COMMAND LINE ARGUMENTS</A></H1>
The following is a handy script for running a server;
this script demonstrates how to set command-line options.
<BLOCKQUOTE><PRE>
#!/bin/csh -f

#	set INST to your installed location
set INST = /p/shore/installed/nodebug
setenv SHORE_RC $ILIB/options
$INST/bin/shore -sm_diskrw $INST/binb/diskrw \
	-svas_shellrc $INST/lib/shore.rc \
	-svas_tcllib $INST/lib/vas.tcllib -v

</PRE></BLOCKQUOTE>

<HR>
<H1><A NAME="HRR.5">SERVER OPTIONS</A></H1>
The following options are used by the Shore Value-Added Server 
process and its subordinate layers of software.
Options that are you must set are marked &quot;Required&quot; below,
because they have no defaults.

<DL>
<DT>sm_bufpoolsize</DT><DD>
Required.
The size of the Storage Manager's buffer pool, in kilobytes.
It must be an integer greater than 64.
No default value.

</DD>
<DT>sm_locktablesize</DT><DD>
Number of entries in the Storage Manager's lock table.
Default is 64000.

</DD>
<DT>sm_backgroundflush</DT><DD>
Optional.
Enables flushing of pages to the disk during otherwise idle
periods.
Default is &quot;yes&quot;.

</DD>
<DT>sm_logdir</DT><DD>
Required.
The path name of a Unix directory or a raw device in 
which the recovery log will be written.
No default value.

</DD>
<DT>sm_reformat_log</DT><DD>
Optional.
A Boolean value which, if &quot;yes&quot; or &quot;true&quot;, 
causes the logs to be destroyed and re-created.
USE WITH CAUTION.  If logs are destroyed and re-created,
volumes must also be re-created.
Default is &quot;no&quot;. 

</DD>
<DT>sm_logsize</DT><DD>
The maximum size that a log partition(file) may reach.
The log has 8 partitions, so this is roughly one eighth
of the total log size.
The minimum size is 1 megabyte, which is
too small for any real work.
When the log is on a raw device, this value may be 0,
which causes the log size to be calculated. 
(Setting this to a non-zero value for raw devices is allowed
for debugging only.)
Default is 10 megabytes.

</DD>
<DT>sm_diskrw</DT><DD>
The path name of the program that the Shore Storage Manager will
fork to perform disk I/O. 
The path name should be the place you installed the executable
program that was made in the source tree as src/sthread/diskrw.
The default value is &quot;diskrw&quot;.

</DD>
<DT>sm_logging</DT><DD>
A Boolean-valued option that determines whether the Shore Storage Manager
will perform logging and recovery during this program execution. 
If turned off, you cannot abort transactions or roll back to savepoints.
The default is true.

</DD>
<DT>sm_errlog</DT><DD>
See the description for the option
&quot;svas_nfsd_log&quot;, below.
Default is - (stderr).
</DD>
<DT>sm_errlog_level</DT><DD>
See the description for the option
&quot;svas_nfsd_log_level&quot;, below.
Default is error.

</DD>
<DT>svas_serve</DT><DD>
This option tells the server what devices to ``serve''.
The value must be of the form 
<em>pathname.</em>
The 
<em>pathname</em>
is the Unix path name of the device on which
a Shore file system has been made.
In other words, the device must have been
formatted and a file system must have been made
on the device before it can be served.

You will use this option when you run a server 
without a Tcl shell, and you want the server to serve
more than one volume.  If you have only one volume
(the server's root volume), you do not need this option,
because the root volume is served by the 
<tt>svas_root</tt>
option (below).

If you want to run your server in the background, without
a Tcl shell, and you are running the server for the first
time (with no log, and no formatted volumes), you must first
start a server with a Tcl shell, use the 
<tt>format, mkfs, serve,</tt>
and possibly 
<tt>pmount</tt>
commands in order to 
format your devices, create Shore file systems, and link them
together as desired.
Once the file systems are constructed, you can  shut down the
server and start it again without a Tcl shell, using one or more
<tt>svas_server</tt>
configuration options to determine what devices are served.

</DD>
<DT>svas_root</DT><DD>
This option determines where the server will find the
root of the Shore name space.
The value must be of the form 
<em>pathname volume-id.</em>
The 
<em>pathname</em>
is the Unix path name of the device on which
the root volume is to be found.
The 
<em>volume-id</em>
is the logical volume identifier (&quot;high.low&quot;)
of the volume whose root directory will correspond to &quot;/&quot;.
The device must already have been formatted, and the volume must
already have been created and formatted as a Shore file system.
This option has no default value.
If no value is given, the server will come up, to allow
devices to be formatted and file systems to be created.

</DD>
<DT>svas_tcllib</DT><DD>
The file name of a Tcl library file that will be
read  when the shell is started (only if the shell was
configured into the executable and the shell is started).
Not an error if the file does not exist. The binary
distribution contains a library file in the 
<tt>lib</tt>
directory.
Default is &quot;vas.tcllib&quot;.

</DD>
<DT>svas_shellrc</DT><DD>
The file name of a Tcl shell command file that will be
read immediately after the shell is started (only if the shell was
configured into the executable and the shell is started).
Default is &quot;shore.rc&quot;.

<P>
</DD>
</DL>
The next four options determine the ports on which the 
server serves requests for its various services.
Each of these port numbers should be an integer between
1024 and 65535.

<DL>
<DT>svas_nfsd_port</DT><DD>
This is the port on which the server receives NFS requests over UDP.
Default is 2999.
</DD>
<DT>svas_mountd_port</DT><DD>
This is the port on which the server receives MOUNT requests over UDP.
Default is 2997.
</DD>
<DT>svas_client_port</DT><DD>
This is the port on which the server listens for client requests over TCP.
Default is 2999.
</DD>
<DT>svas_remote_port</DT><DD>
This is the port on which the server listens for requests 
from other Shore Value-Added Servers and from the 
<tt>sshutdown</tt>
program.
Default is 2998.
<P>
</DD>
</DL>
<DL>
<DT>svas_reuse_addrs</DT><DD>
When set to &quot;true&quot; or &quot;yes&quot;, 
the addresses constructed from the above ports
can be used by more than one process.
This alleviates the problem of restarting a server
that was not cleanly shut down,
and getting the &quot;Address already in use&quot; error from
the operating system while it 
is waiting for the TCP 2*maximum-segment-lifetimes
to expire.
BEWARE: 
There is no way to distinguish the 
crashed-server case from the case in which
another server is really up and running.
Be sure you are not running a second server with the
same configuration as the first!!!
The results are undefined. You will probably clobber
your log and be unable to recover.

Default is &quot;no&quot;.

<P>
</DD>
</DL>
The next five options determine the destinations of messages
that are logged by the various services.
There are three possible destinations: a file in the Unix file system,
the syslog daemon, or the standard error file (usually the terminal).
If the value of the option is &quot;-&quot;, the standard error file is used.
If it is &quot;syslogd&quot;, the messages are sent to the syslog daemon.
If it is any other string, it is interpreted as a Unix path name.
<DL>
<DT>svas_nfsd_log</DT><DD>
The destination of log messages generated by the NFS service.
Default is &quot;-&quot;.
</DD>
<DT>svas_mountd_log</DT><DD>
The destination of log messages generated by the MOUNT service.
Default is &quot;-&quot;.
</DD>
<DT>svas_client_log</DT><DD>
The destination of log messages generated by the Shore client request service.
Default is &quot;-&quot;.
</DD>
<DT>svas_shell_log</DT><DD>
The destination of log messages generated by the Tcl shell on the
server.
Default is &quot;-&quot;.
</DD>
<DT>svas_log</DT><DD>
The destination of log messages generated by the Shore,
but which do not pertain to one of the three services above.
Default is &quot;-&quot;.

<P>
</DD>
</DL>
For each of the above logs, you can control the priority of 
messages that is logged.
Possible are: trace info error internal fatal.
They correspond to the levels for logging to the
syslog daemon.
<DL>
<DT>svas_nfsd_log_level</DT><DD>
Default is error.
</DD>
<DT>svas_mountd_log_level</DT><DD>
Default is error.
</DD>
<DT>svas_client_log_level</DT><DD>
Default is error.
</DD>
<DT>svas_shell_log_level</DT><DD>
Default is error.
</DD>
<DT>svas_log_level</DT><DD>
Default is error.

<P>
</DD>
</DL>
The rest of the server options are Boolean-valued options.
Values can be given as &quot;yes&quot;, &quot;no&quot;, &quot;true&quot;, or &quot;false&quot;.

<DL>
<DT>svas_nfsd_pmap</DT><DD>
If &quot;true&quot; or &quot;yes&quot;, the server will register this service with the portmapper.
Default is &quot;no&quot;.
</DD>
<DT>svas_mountd_pmap</DT><DD>
If &quot;true&quot; or &quot;yes&quot;, the server will register this service with the portmapper.
Default is &quot;no&quot;.

</DD>
<DT>svas_remote_pmap</DT><DD>
If &quot;true&quot; or &quot;yes&quot;, the server will register this service with the portmapper.
Default is &quot;no&quot;.
</DD>
<DT>svas_client_pmap</DT><DD>
If &quot;true&quot; or &quot;yes&quot;, the server will register this service with the portmapper.
Default is &quot;no&quot;.

</DD>
<DT>svas_noshm</DT><DD>
If &quot;true&quot; or &quot;yes&quot;, the server prohibits the use of shared memory
when communicating with clients (overriding client options
regarding the use of shared memory).  
This is for debugging purposes only.
Default is &quot;no&quot;.

</DD>
<DT>svas_rpc_unregister</DT><DD>
If &quot;true&quot; or &quot;yes&quot;, and the server is unable to register with the portmapper,
it will try to un-register and re-register.
For restarting after a crash; avoids running &quot;rpcinfo -d&quot;.
Default is &quot;no&quot;.
Use carefully!

</DD>
<DT>svas_print_user_errors</DT><DD>
If &quot;true&quot; or &quot;yes&quot;, the server
will print messages about user errors to the standard output file.
Default is &quot;no&quot;.

</DD>
<DT>svas_print_user_stats</DT><DD>
If &quot;true&quot; or &quot;yes&quot;, the server
will print statistics to the standard output file every time
a client's transaction changes state.
Default is &quot;no&quot;.

</DD>
<DT>svas_clear_user_stats</DT><DD>
If &quot;true&quot; or &quot;yes&quot;, the server
will clear its  statistics every time
a client's transaction changes state.

</DD>
<DT>svas_tclshell</DT><DD>
If &quot;true&quot; or &quot;yes&quot;, the server
will start a Tcl shell (if the shell was configured into the
executable).
Default is &quot;yes&quot;.

</DD>
<DT>svas_sysp_cache_size</DT><DD>
An integer-valued option, whose value should be a small integer.
It determines the size (number of entries in) of the 
meta-data cache created for each client.
The meta-data cache caches system properties of pools and
of objects containing indexes, in order to expedite
permissions checking during operations on anonymous objects
and indexes.
This will be removed in later versions of Shore.
It is present only for developers' purposes.
The default value is 1.

</DD>
<DT>svas_mount_table_size</DT><DD>
An integer-valued option, whose value should be a small integer.
It determines the size (number of entries in) of the 
transient mount table.
Default is 20.

</DD>
</DL>
<HR>
<H1><A NAME="HRR.6">SHUTDOWN OPTIONS</A></H1>
<P>
The shutdown program is a client program,
which uses the following options, whose values
must match those of the server to be shut down by
this program:
<DL>
<DT>svas_remote_pmap</DT><DD>
</DD>
<DT>svas_remote_port</DT><DD>

<P>
</DD>
</DL>
and it uses the following client option:
<DL>
<DT>svas_host</DT><DD>

</DD>
</DL>
<HR>
<H1><A NAME="HRR.7">CLIENT LIBRARY OPTIONS</A></H1>

<P>
The following options are used by the Shore Value-Added Server 
client library.
The client library is included in the Shore language-independent
library, so these are avaliable to all application programs
that use SDL.

<DL>
<DT>svas_host</DT><DD>
The name of the host on which the server runs.
The default value is &quot;localhost&quot;, which is really the only
way Shore is intended to be run.  This option is available
only for debugging purposes. 

</DD>
<DT>svas_log</DT><DD>
The name of the Unix file to which the client library
will log information as it runs.
The value &quot;-&quot; means that information will be
logged to the standard error file (usually the terminal).
If given the value &quot;syslogd&quot;, the client library will
log to the syslog daemon, 
as the facility LOG_USER.
The default value is &quot;-&quot; (log to standard error).

</DD>
<DT>svas_shm_small_obj</DT><DD>
The number of kilobytes of shared memory to allocate
for transferring small objects between the server and the
client.
The default is 16 (two pages).

</DD>
<DT>svas_shm_large_obj</DT><DD>
The number of kilobytes of shared memory to allocate
for transferring large objects between the server and the
client.
The default is 256.

</DD>
<DT>svas_use_pmap</DT><DD>
If &quot;yes&quot; or &quot;true&quot;,
the client library consults the portmapper to locate the server.
If  &quot;no&quot; or &quot;false&quot;, the client library does not contact
the portmapper, and uses the value of
the option &quot;svas_port&quot; to locate the server.
The default is &quot;no&quot;.

</DD>
<DT>svas_port</DT><DD>
The port at which the server is listening.
The default is 2999.

</DD>
<DT>svas_print_user_errors</DT><DD>
A Boolean-valued option that determines whether the client library
will print messages about user errors to the standard output file.
The default is &quot;no&quot;.

</DD>
</DL>
<HR>
<H1><A NAME="HRR.8">OBJECT CACHE OPTIONS</A></H1>

See
<A HREF="options.oc.html"><STRONG>options(oc)</STRONG></A>
for information about options available for client programs
that use SDL.


<HR>
<H1><A NAME="HRR.9">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.10">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.11">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.12">SEE ALSO</A></H1>
<A HREF="environment.svas.html"><STRONG>environment(svas)</STRONG></A>
</BODY>
</HTML>
