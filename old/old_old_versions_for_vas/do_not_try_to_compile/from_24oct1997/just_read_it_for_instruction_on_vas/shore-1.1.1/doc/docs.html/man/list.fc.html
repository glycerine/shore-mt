<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:41:13 CST 1997 from file manfc/list.fc -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
list(fc) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
w_list_t - generic list structures
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
<UL>
<LI>
<A HREF="#HRR.2.1">Unsorted lists</A>
</LI>
<LI>
<A HREF="#HRR.2.2">Sorted lists</A>
</LI>
<LI>
<A HREF="#HRR.2.3">DERIVING NEW LISTS</A>
</LI>
</UL>
</LI>
<LI>
<A HREF="#HRR.3">BUGS</A>
</LI>
<LI>
<A HREF="#HRR.4">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.5">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.6">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.7">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
<TT>#include &lt;w.h&gt;</TT>
<TT>#include &lt;w_list.h&gt;</TT>
// for definition of offsetof(x,y):
<TT>#include &lt;stddef.h&gt;</TT>

class w_link_t;
class T {
    // your type
    ...
    w_link_t    _link;
    ...
};

// unsorted lists:
template &lt;class T&gt; class w_list_t; 

// iterator over a w_list_t:
template &lt;class T&gt; class w_list_i; 
template &lt;class T&gt; class w_list_const_i; 

// sorted lists:
template &lt;class T, class K&gt; w_descend_list_t;
template &lt;class T, class K&gt; w_ascend_list_t;
</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>
<P>
This is a set templates for managing doubly-linked lists of
objects of type 
<strong>T</strong>
(for user-defined types T).
The double-linking of items into lists is accomplished
with the class
 <em>w_link_t,</em>
which must be a member of the type T.
The template methods operate on the 
 <em>w_link_t</em>
member.  The name of the member can be anything;
the methods locate the member
by information given when the list is constructed:
<BLOCKQUOTE><PRE>
w_list_t&lt;mytype&gt; l(offsetof(mytype, mylink));
</PRE></BLOCKQUOTE>
where the template parameter is the type:
<BLOCKQUOTE><PRE>
class mytype {
    int            a;
    w_link_t       mylink;
    ...
    int            b;
};
</PRE></BLOCKQUOTE>
<P>
The lists managed by these templates are of
two general kinds: 
unsorted and sorted.
<H2><A NAME="HRR.2.1">Unsorted lists</A></H2>
<P>
Unsorted 
lists (
 <strong>w_list_t&lt;T&gt;</strong>)
are constructed as in the example given above.
<P>
Items are put into the list with 
the any of the following methods:
<BLOCKQUOTE><PRE>
w_list_t&lt;T&gt;&amp;   push(T* t);
T*             pop();    // reverse of push
w_list_t&lt;T&gt;&amp;   append(T* t) ;
T*             chop();    //reverse of append
</PRE></BLOCKQUOTE>
<P>
These methods return the objects at the
front and rear of the lists:
<BLOCKQUOTE><PRE>
T*     top();
T*     bottom();
</PRE></BLOCKQUOTE>
<P>
A list can be printed with 
<BLOCKQUOTE><PRE>
friend ostream&amp;             operator&lt;&lt;(
    ostream&amp;                    o,
    const w_list_t&lt;T&gt;&amp;          l);
</PRE></BLOCKQUOTE>

<P>
Unsorted lists 
are traversed with iterators (instances of 
 <strong>w_list_i&lt;T&gt;</strong>),
which have methods
 <strong>next(),</strong>
 <strong>curr(),</strong>
and 
 <strong>reset().</strong>
<BLOCKQUOTE><PRE>
{
    mytype    *p;
    w_list_i&lt;mytype&gt; iter(l);
    for (int i = 0; i &lt; 10; i++)  {
        p = iter.next();
        if ( p-&gt;a == ....  // whatever you wish
    }
}
</PRE></BLOCKQUOTE>

<H2><A NAME="HRR.2.2">Sorted lists</A></H2>
<P>
Sorted lists (
 <strong>w_descend_list_t&lt;T,K&gt;</strong>
and
 <strong>w_ascend_list_t&lt;T,K&gt;</strong>)
are lists of objects containing
 <strong>keys</strong>,
which are members of the template parameter class T,
whose type is the template parameter type K.
<P>
Sorted lists are traversed by calling their 
methods 
<BLOCKQUOTE><PRE>
virtual T *search(const K &amp;);
</PRE></BLOCKQUOTE>
In order for the method
 <strong>search</strong>
to work, the
template has to find a member of the key type 
<strong>K</strong>
in each instance of type T that is in the list.
For this reason, each ordered list is constructed with the
location of the key as well as the location of the 
 <strong>w_link_t:</strong>
<BLOCKQUOTE><PRE>
// order this list on the value of a in descending order
w_descend_list_t&lt;mytype, int&gt; l(
        offsetof(mytype, a),     
        offsetof(mytype, mylink) // offset of link
);

// order this list on the value of b in ascending order
w_ascend_list_t&lt;mytype, int&gt; l(
        offsetof(mytype, b),     
        offsetof(mytype, mylink) // offset of link
);
</PRE></BLOCKQUOTE>
<P>
Objects are inserted into sorted lists with the
method
 <strong>put_in_order:</strong>
<BLOCKQUOTE><PRE>
virtual void   put_in_order(T* t);
</PRE></BLOCKQUOTE>
<P>
Sorted lists can be traversed with iterators (
 <strong>w_list_i</strong>),
and with these methods:
<BLOCKQUOTE><PRE>
T*    first();
T*    last();
</PRE></BLOCKQUOTE>
<P>
In addition, methods derived from
 <strong>w_list_i</strong>
such as 
 <strong>pop</strong>
can be used to remove items from the head
list (e.g, for destroying the entire list). 
<H2><A NAME="HRR.2.3">DERIVING NEW LISTS</A></H2>
The methods
 <strong>search</strong>
and 
 <strong>put_in_order</strong>
are declared virtual so that other list types
can be derived from these templates.
<HR>
<H1><A NAME="HRR.3">BUGS</A></H1>
<P>
There are no methods for removing items from 
the middle of a list.
<HR>
<H1><A NAME="HRR.4">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.5">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.6">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.7">SEE ALSO</A></H1>
<A HREF="rc.fc.html"><STRONG>rc(fc)</STRONG></A>, 
<A HREF="intro.fc.html"><STRONG>intro(fc)</STRONG></A>,
<A HREF="statistics.oc.html"><STRONG>statistics(oc)</STRONG></A>,
<A HREF="statistics.svas.html"><STRONG>statistics(svas)</STRONG></A>,
and
<A HREF="statistics.ssm.html"><STRONG>statistics(ssm)</STRONG></A>.
</BODY>
</HTML>
