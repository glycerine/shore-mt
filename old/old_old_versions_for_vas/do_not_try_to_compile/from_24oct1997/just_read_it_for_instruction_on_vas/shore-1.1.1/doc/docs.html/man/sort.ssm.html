<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:41:09 CST 1997 from file manssm/sort.ssm -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
sort(ssm) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
sort_file - Class ss_m Sorting Methods
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">ERRORS</A>
</LI>
<LI>
<A HREF="#HRR.4">EXAMPLES</A>
</LI>
<LI>
<A HREF="#HRR.5">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.6">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.7">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.8">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
#include &lt;sm_vas.h&gt;  // which includes sm.h

static rc_t                 sort_file(
    const lvid_t&amp;               lvid,		// logical vol id (input file)
    const serial_t&amp;             serial,		// serial no for input file
    const lvid_t&amp;               s_lvid, 	// logical vol id (output file)
    serial_t&amp;                   s_serial, 	// serial no for output file
    store_property_t            property,	// property for output file
    const key_info_t&amp;           key_info, 	// sort key info
    int                         run_size,	// # of pages for each run
    bool                        unique = false, // eliminate duplicates
    bool                        destructive = false); // destroy input file 

</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>

Method
 <strong>ss_m::sort_file</strong>
is an external sorting utility to sort an existing file
in the order of specified keys.  Current release only supports following
built-in sort key types: integer, float, char, string and spatial
(rectangles on their Hilbert value).  Sorting on variable length 
keys is not supported currently.

<P>
User can control the buffer size needed for the sorting by specifying
the desired
 <em>run_size.</em>
Usually the bigger the
 <em>run_size,</em>
the faster the sort.

<P>
User need to provide detail information on the sort key in
 <em>key_info.</em>
This includes information such as type, location and length.
The location of the
key has to be fixed offset from the beginning of the record.
Class
 <strong>key_info_t</strong>
is further described in
<A HREF="sort_stream_i.ssm.html"><STRONG>sort_stream_i(ssm)</STRONG></A>.

<P>
Setting the
 <em>unique</em>
flag to
 <strong>true</strong>
will eliminate duplicate records in the file.
Setting 
Setting the
 <em>destructive</em>
to true will destroy the input file and map the records' logical
IDs to those in the new sorted file.

<P>
For sorting on variable length records (keys may not stay at fixed 
location within records), one can fix the key location by copying
the key from body to the beginning of hdr for the record, turn on
derived flag in
 <em>key_info</em>
before invoking
 <strong>sort_file.</strong>
The result file will have the duplicated key eliminated in each record.

<HR>
<H1><A NAME="HRR.3">ERRORS</A></H1>

RCOK is returned if there is no lower level error.

<HR>
<H1><A NAME="HRR.4">EXAMPLES</A></H1>

To sort a file on integer key which is the first field inside each
record body, specify the
 <em>key_info</em>
as below:

<BLOCKQUOTE><PRE>

key_info.type = t_int;
key_info.where = t_body;
key_info.offset = 0;
key_info.len = sizeof(int);
</PRE></BLOCKQUOTE>

<HR>
<H1><A NAME="HRR.5">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.6">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.7">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.8">SEE ALSO</A></H1>
<A HREF="sort_stream_i.ssm.html"><STRONG>sort_stream_i(ssm)</STRONG></A>,
<A HREF="file.ssm.html"><STRONG>file(ssm)</STRONG></A>,

</BODY>
</HTML>
