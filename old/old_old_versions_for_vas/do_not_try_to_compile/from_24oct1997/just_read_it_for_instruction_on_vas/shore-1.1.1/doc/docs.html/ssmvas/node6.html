<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!--Converted with LaTeX2HTML 97.1 (release) (July 13th, 1997)
 by Nikos Drakos (nikos@cbl.leeds.ac.uk), CBLU, University of Leeds
* revised and updated by:  Marcus Hennecke, Ross Moore, Herb Swan
* with significant contributions from:
  Jens Lippman, Marek Rouchal, Martin Wilck and others -->
<HTML>
<HEAD>
<TITLE>Implementing Clients</TITLE>
<META NAME="description" CONTENT="Implementing Clients">
<META NAME="keywords" CONTENT="ssmvas">
<META NAME="resource-type" CONTENT="document">
<META NAME="distribution" CONTENT="global">
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso_8859_1">
<LINK REL="STYLESHEET" HREF="ssmvas.css">
<LINK REL="next" HREF="node7.html">
<LINK REL="previous" HREF="node5.html">
<LINK REL="up" HREF="ssmvas.html">
<LINK REL="next" HREF="node7.html">
</HEAD>
<BODY >
<!--Navigation Panel-->
<A NAME="tex2html231"
 HREF="node7.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="../icons.gif/next_motif.gif"></A> 
<A NAME="tex2html228"
 HREF="ssmvas.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="../icons.gif/up_motif.gif"></A> 
<A NAME="tex2html222"
 HREF="node5.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="../icons.gif/previous_motif.gif"></A> 
<A NAME="tex2html230"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="../icons.gif/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html232"
 HREF="node7.html">Compiling the Example</A>
<B> Up:</B> <A NAME="tex2html229"
 HREF="ssmvas.html">Writing Value-Added Servers with Manager</A>
<B> Previous:</B> <A NAME="tex2html223"
 HREF="node5.html">Implementing a Multi-Threaded Server</A>
<BR>
<BR>
<!--End of Navigation Panel-->
<!--Table of Child-Links-->
<A NAME="CHILD_LINKS"><strong>Subsections</strong></A>
<UL>
<LI><A NAME="tex2html233"
 HREF="node6.html#SECTION00061000000000000000000">
Connection Management</A>
<LI><A NAME="tex2html234"
 HREF="node6.html#SECTION00062000000000000000000">
Client Side of RPCs</A>
</UL>
<!--End of Table of Child-Links-->
<HR>
<A NAME="ssmvas:implclients">&#160;</A><H1><A NAME="SECTION00060000000000000000000">
Implementing Clients</A>
</H1>
<P>
The client is simpler than the server.
It is single threaded and calls server RPCs to do most work.
It uses the the configuration options and error handling facilities
of the SSM similar to the server use of them.
<P>
This section focuses on RPC issues.
<P><A NAME="ssmvas:cxmgmt">&#160;</A><H2><A NAME="SECTION00061000000000000000000">
Connection Management</A>
</H2>
<P>
The code for connection management is all in file <TT>client.C</TT>.
The function <TT>connect_to_server</TT> connects to a server
at a specific host and port.  The original Sun RPC package has
no direct support for this since it assumes you will use
the <TT>port mapper</TT> facility.  However, the Shore version
of the package has a <TT>clnt_create_port</TT> function that
could replace most of the code in <TT>connect_to_server</TT>.
<P>
The function <TT>disconnect_from_server</TT> demonstrates how
to end a session with the server.
<P><A NAME="ssmvas:clientrpc">&#160;</A><H2><A NAME="SECTION00062000000000000000000">
Client Side of RPCs</A>
</H2>
<P>
The client-side stubs for the RPCs are generated by <TT>rpcgen</TT>
and placed in <TT>msg_clnt.c</TT>.
<A HREF="node5.html#ssmvas:cxxwrap">Recall</A>
that
we wrap the RPCs in C++ methods from the <TT>command_base_t</TT>
abstract base class.  From that class we derive <TT>command_client_t</TT>
and implement the methods by calling the RPC stubs.
<P>
In <TT>client.C</TT> the function <TT>process_user_commands</TT>
creates an <TT>command_client_t</TT> object, reads lines from
standard input, and calls <TT>command_client_t::parse_command</TT>
for each line.  Method <TT>parse_command</TT> in turn calls
the <TT>command_client_t</TT> wrapper methods.
<P><HR>
<!--Navigation Panel-->
<A NAME="tex2html231"
 HREF="node7.html">
<IMG WIDTH="37" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="next"
 SRC="../icons.gif/next_motif.gif"></A> 
<A NAME="tex2html228"
 HREF="ssmvas.html">
<IMG WIDTH="26" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="up"
 SRC="../icons.gif/up_motif.gif"></A> 
<A NAME="tex2html222"
 HREF="node5.html">
<IMG WIDTH="63" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="previous"
 SRC="../icons.gif/previous_motif.gif"></A> 
<A NAME="tex2html230"
 HREF="node1.html">
<IMG WIDTH="65" HEIGHT="24" ALIGN="BOTTOM" BORDER="0" ALT="contents"
 SRC="../icons.gif/contents_motif.gif"></A>  
<BR>
<B> Next:</B> <A NAME="tex2html232"
 HREF="node7.html">Compiling the Example</A>
<B> Up:</B> <A NAME="tex2html229"
 HREF="ssmvas.html">Writing Value-Added Servers with Manager</A>
<B> Previous:</B> <A NAME="tex2html223"
 HREF="node5.html">Implementing a Multi-Threaded Server</A>
<!--End of Navigation Panel-->
<ADDRESS>
<I>This page was generated from LaTeX sources
<BR>10/27/1997 </I>
</ADDRESS>
</BODY>
</HTML>
