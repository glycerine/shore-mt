<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:41:13 CST 1997 from file manshore/oid.shore -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
oid(shore) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
lrid_t - Shore Object Identifiers
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">BUGS</A>
</LI>
<LI>
<A HREF="#HRR.4">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.5">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.6">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.7">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
class lrid_t;

<TT>#include &lt;lid_t.h&gt;</TT>
</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>
Every Shore object has an identity,
which is a value that is guaranteed to 
uniquely identify the object from all other
objects that have ever existed in Shore.
The Shore Storage Manager (SSM)
gives each object a
 <em>physical record identifier</em>,
and, if a value-added server so chooses, a
 <em>logical record identifier</em>.
If logical record identifiers are used,
the SSM maintains the mapping between
logical record identifiers
and physical record identifiers.
<P>
The Shore Value-Added Server uses logical
record identifiers,
which we call an
 <em>object identifier (OID)</em>.
<P>
An OID comprises a 
<em>logical volume identifier</em>
and a
 <em>serial number</em>.
A logical volume identifier contains
the (Internet) network address of the 
SSM server that manages the volume, and a
 <em>physical volume identifier</em>,
which identifies the volume to that server.
A server cannot manage two volumes with the
same physical volume identifier, but two
different servers can manage 
volumes with the same
physical volume identifier.
<P>
A serial number is a set of bits (identity) 
that the SSM assigns to entities on a volume.
Serial numbers are used for SSM files, 
indexes, and records (objects), and other things
internal to the SSM.
Serial numbers, once associated with an entity,
are never reused for another entity.
The serial number in an object's OID 
is the serial number that the SSM associates with the 
record in which the object is stored.
<P>
A complete reference to an object consists of its
full logical object identifier, which is rather
large.
Many references, however consist only of the serial
number, because context is present:
the volume on which the object resides is known.
When Shore objects are committed to the disk,
<strong>all</strong>
references are stored
in the form of a serial number.
References to objects on another volume, 
called
<em>off-volume references</em>
or 
<em>indirect references</em>
are managed as follows.
(Keep in mind that this discussion
pertains only to value-added servers that
use logical identifiers.)
<P>
Remember that the SSM maintains a mapping
of logical object identifiers to their physical
object identifiers.
In fact, it maintains a mapping on each volume,
whose domain is the serial numbers, and whose
range is all logical record identifiers, the physical
record identifiers on the volume, combined.
In other words, a serial number can be mapped to
any logical object identifier, including one that
refers to an object on another volume.  
This scheme allows 
<em>chains</em>
of references to be built.
It also permits indirect (and inefficient)
references to local objects.
The Shore Value-Added Server and
the Shore Object Cache
reduce these chains by
<em>snapping</em>
(reducing to a direct reference)
references when appropriate.
Nevertheless, it is beneficial to
avoid inter-volume references in a database
altogether.
<P>
A serial number is specified by the C++ class
 <strong>serial_t</strong>,
found in 
<BLOCKQUOTE><PRE>
<TT>#include &lt;serial_t.h&gt;</TT>
</PRE></BLOCKQUOTE>
The class has methods to tell if the serial number is
<em>null,</em>
<em>remote,</em>
or 
<em>local.</em>
The data portion of the class
is a C structure, found in
<BLOCKQUOTE><PRE>
<TT>#include &lt;serial_t_data.h&gt;</TT>
</PRE></BLOCKQUOTE>
The data portion of a serial number has the same form
as an in-memory address, and 
contains 32 or 64 bits, depending on
a compile-time configuration option.
In either case the following bits of an address
have special meanings:
<DL>
<DT>least significant bit</DT><DD>
if 1, the reference is a serial number, if 0, it is 
an in-memory pointer.
</DD>
<DT>most significant bit</DT><DD>
in serial numbers, the most significant bit
is interpreted as follows:
if 1, the serial number is a remote reference,
if 0, it is a reference to something on this volume.
</DD>
</DL>
<HR>
<H1><A NAME="HRR.3">BUGS</A></H1>
There is no mechanism to remove unused
indirection chains from the volume's 
OID index, since reference counts are not
kept.
<HR>
<H1><A NAME="HRR.4">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.5">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.6">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.7">SEE ALSO</A></H1>
<A HREF="lid.ssm.html"><STRONG>lid(ssm)</STRONG></A>,
<A HREF="serial_t.common.html"><STRONG>serial_t(common)</STRONG></A>,
and 
<A HREF="lid_t.common.html"><STRONG>lid_t(common)</STRONG></A>.
</BODY>
</HTML>
