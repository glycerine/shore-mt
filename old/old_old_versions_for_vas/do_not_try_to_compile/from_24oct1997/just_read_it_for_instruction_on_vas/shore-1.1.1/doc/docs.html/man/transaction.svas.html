<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:41:05 CST 1997 from file mansvas/transaction.svas -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
transaction(svas) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
transaction - making sequences of Shore operations atomic 
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">ARGUMENTS</A>
</LI>
<LI>
<A HREF="#HRR.4">DEGREE</A>
</LI>
<LI>
<A HREF="#HRR.5">ENVIRONMENT</A>
</LI>
<LI>
<A HREF="#HRR.6">ERRORS</A>
</LI>
<LI>
<A HREF="#HRR.7">REFERENCES</A>
</LI>
<LI>
<A HREF="#HRR.8">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.9">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.10">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.11">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
VASResult    shore_vas::trans(tid_t    *tid=0);

VASResult    shore_vas::beginTrans( int        degree,
                         tid_t      *tid = 0);

VASResult    shore_vas::abortTrans(int  reason = ST_UserAbort);
VASResult    shore_vas::abortTrans(const  tid_t    &amp;tid,
                          int     reason = ST_UserAbort);

VASResult    shore_vas::commitTrans();
VASResult    shore_vas::commitTrans(const  tid_t    &amp;tid);
</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>
 <strong>Trans</strong>
returns ST_FAILURE if no transaction is associated with the caller.
If a transaction is associated with the caller, whatever its state,
 <strong>trans</strong>
returns ST_OK.
If 
 <em>tid</em>
is non-null,
the transaction identifier for the transaction
is returned in its target.
<P>
 <strong>BeginTrans,</strong>
 <strong>abortTrans,</strong>
and
 <strong>commitTrans</strong>
start, roll back, and commit transactions,
respectively.
<HR>
<H1><A NAME="HRR.3">ARGUMENTS</A></H1>
If the argument
 <em>tid</em>
to 
 <strong>beginTrans</strong>
and 
 <strong>trans</strong>
is non-null, the transaction identifier is written into the area addressed by
 <em>tid.</em>
<P>
For 
 <strong>commitTrans</strong>
and
 <strong>abortTrans,</strong>
the argument
 <em>tid</em>
identifies the transaction to be committed or aborted, respectively.
If no such argument is given, the 
<strong>current</strong>
transaction is committed or aborted.
<P>
 <strong>BeginTrans</strong>
takes an argument,
 <em>degree,</em>
which takes a value between 0 and 3, respectively.
<HR>
<H1><A NAME="HRR.4">DEGREE</A></H1>
The degree refers to the ACID 
(atomicity, consistency isolation, durability) 
properties of the transaction.
See 
<em>Gray, J., Reuter, A.  Transaction Processing: concepts and techniques, 1993.</em>
for details.
<strong>Degree 0, 1, and 2 transactions are not implemented.</strong>
<HR>
<H1><A NAME="HRR.5">ENVIRONMENT</A></H1>
All these methods are available
on both the server and clients.
<HR>
<H1><A NAME="HRR.6">ERRORS</A></H1>
<P>
In general, user errors in SVAS methods cause the transaction 
to be rolled back to its state when the SVAS method was called.
Some errors are serious enough to cause the entire transaction
to be aborted.
<P>
After a method returns in error (it returns SVAS_FAILURE),
the 
 <em>shore_vas</em>object's<em>status</em>indicates<em>that</em>the
reason for the failure is ST_SmFailure.
(the Storage Manager detected a problem; 
the Storage Manager's reason indicates that a deadlock occurred).
The status also indicates whether the transaction
was aborted or is still active.
If the transaction was aborted,
The caller must recognize the condition and start a new transaction
in order to proceed.
to be aborted.
<HR>
<H1><A NAME="HRR.7">REFERENCES</A></H1>
<em>Gray, J., Reuter, A.  Transaction Processing: concepts and techniques, 1993.</em>
<HR>
<H1><A NAME="HRR.8">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.9">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.10">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.11">SEE ALSO</A></H1>
<A HREF="sysprops.svas.html"><STRONG>sysprops(svas)</STRONG></A>,
<A HREF="writeObj.svas.html"><STRONG>writeObj(svas)</STRONG></A>,
<A HREF="truncObj.svas.html"><STRONG>truncObj(svas)</STRONG></A>,
<A HREF="appendObj.svas.html"><STRONG>appendObj(svas)</STRONG></A>,
<A HREF="lockObj.svas.html"><STRONG>lockObj(svas)</STRONG></A>,
<A HREF="errors.svas.html"><STRONG>errors(svas)</STRONG></A>,
and
<A HREF="transaction.svas.html"><STRONG>transaction(svas)</STRONG></A>.
</BODY>
</HTML>
