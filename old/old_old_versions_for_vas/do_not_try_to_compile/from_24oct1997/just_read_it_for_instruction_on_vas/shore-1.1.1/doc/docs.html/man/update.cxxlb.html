<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:40:54 CST 1997 from file mancxxlb/update.cxxlb -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
update(cxxlb) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
update - mark object dirty
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.4">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.5">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.6">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
<TT>#include &lt;ShoreApp.h&gt;</TT>
T *Ref&lt;T&gt;::update() const
</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>
<P>
 <strong>Update</strong>
informs Shore of an application's intent to modify a Shore object.  
In particular, it obtains an EX (exclusive-mode) lock on the object if
such a lock is not already held by the current transaction.  
Update must be called before any non-&quot;const&quot; method of the object is called.  
If the application fails to call
 <strong>update</strong>
on an object before each call of a non-&quot;const&quot; method, 
the compiler will
flag the method call as an error.
<BLOCKQUOTE><PRE>
	Ref&lt;myInterfaceType&gt; obj = REF(myInterfaceType)::lookup(...

	obj.update()-&gt;non_const_method1();
	obj.update()-&gt;non_const_method2();

</PRE></BLOCKQUOTE>
<P>
An alternative, and ever-so-slightly more efficient way to use 
 <strong>update</strong>
is to use non-const references, which call 
 <strong>update</strong>
behind the scenes once upon assignment, and can thereafter
be used to call non-const references.
<BLOCKQUOTE><PRE>
<BLOCKQUOTE><PRE>
	WRef&lt;myInterfaceType&gt; obj = WREF(myInterfaceType)::lookup(...
	// update has already been called.

	obj.non_const_method1();
	obj.non_const_method2();
</PRE></BLOCKQUOTE>
<P>
If
either
 <strong>update</strong>
or the copy operator for
WRef&lt;T&gt;
encounters any errors, it calls the installed error handler.  
Applications
can reduce the possibility of such errors by using 
Ref&lt;T&gt;::fetch (see
<A HREF="fetch.cxxlb.html"><STRONG>fetch(cxxlb)</STRONG></A>
), Ref&lt;T&gt;::valid
<A HREF="valid.cxxlb.html"><STRONG>valid(cxxlb)</STRONG></A>
), or
<A HREF="access.oc.html"><STRONG>access(oc)</STRONG></A>
to obtain an exclusive lock before calling
 <strong>update.</strong>
<HR>
<H1><A NAME="HRR.3">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.4">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.5">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.6">SEE ALSO</A></H1>
<A HREF="access.oc.html"><STRONG>access(oc)</STRONG></A>,
<A HREF="fetch.cxxlb.html"><STRONG>fetch(cxxlb)</STRONG></A>,
<A HREF="method.cxxlb.html"><STRONG>method(cxxlb)</STRONG></A>,
<A HREF="ref.cxxlb.html"><STRONG>ref(cxxlb)</STRONG></A>,
<A HREF="valid.cxxlb.html"><STRONG>valid(cxxlb)</STRONG></A>.
</BODY>
</HTML>
