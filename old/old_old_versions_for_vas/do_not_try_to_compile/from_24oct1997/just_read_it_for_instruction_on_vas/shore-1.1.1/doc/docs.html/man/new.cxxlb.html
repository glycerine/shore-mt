<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:40:53 CST 1997 from file mancxxlb/new.cxxlb -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
new(cxxlb) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
new - create Shore object
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">EXAMPLE</A>
</LI>
<LI>
<A HREF="#HRR.4">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.5">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.6">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.7">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
<TT>#include &lt;ShoreApp.h&gt;</TT>

void *T::operator new(unsigned int size,
                      const char *path,
                      mode_t mode);

void *T::operator new(unsigned int size,
                      Ref&lt;Pool&gt; pool);
</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>
<P>
These operators create new Shore objects of type
 <em>T.</em>
In both cases, the
 <em>size</em>
argument is supplied by the C++ compiler, not by the application.  The
first form creates a registered object named by
 <em>path</em>
and with a mode given by
 <em>mode</em>
(see
<A HREF="umask.oc.html"><STRONG>umask(oc)</STRONG></A>
for a description of how the actual mode is determined).  The second form
creates an anonymous object in the pool given by
 <em>pool.</em>
If an error occurs during the creation of the object, then the currently
installed error handler is called.  An alternate interface for Shore object
creation is Ref&lt;T&gt;::new_persistent (see
<A HREF="create.cxxlb.html"><STRONG>create(cxxlb)</STRONG></A>
).
<P>
C++ specifies that operator new must return a &quot;void *&quot;.  However,
applications should never assign the result of the Shore new operators to a
&quot;void *&quot; or &quot;T *&quot; variable.  Instead, they should Ref&lt;T&gt;::operator= (see
<A HREF="assign.cxxlb.html"><STRONG>assign(cxxlb)</STRONG></A>
)
to assign it to variable of type Ref&lt;T&gt;.
<HR>
<H1><A NAME="HRR.3">EXAMPLE</A></H1>
The following example illustrates the use of operator new.
<BLOCKQUOTE><PRE>
Ref&lt;Part&gt; part;
Ref&lt;Pool&gt; pool;

// create new registered part object
part = new(&quot;/home/test/part&quot;, 0644) Part;

// create new anonymous part object in the given pool
pool = ...
part = new(pool) Part;
</PRE></BLOCKQUOTE>
The first call to operator new creates a registered part object with
pathname &quot;/home/test/part&quot; and mode 0644.  The second call creates an
anonymous part object in the given pool.
<HR>
<H1><A NAME="HRR.4">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.5">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.6">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.7">SEE ALSO</A></H1>
<A HREF="intro.cxxlb.html"><STRONG>intro(cxxlb)</STRONG></A>,
<A HREF="assign.cxxlb.html"><STRONG>assign(cxxlb)</STRONG></A>,
<A HREF="create.cxxlb.html"><STRONG>create(cxxlb)</STRONG></A>,
<A HREF="ref.cxxlb.html"><STRONG>ref(cxxlb)</STRONG></A>,
<A HREF="umask.oc.html"><STRONG>umask(oc)</STRONG></A>.
</BODY>
</HTML>
