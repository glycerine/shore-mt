<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:41:02 CST 1997 from file mansvas/new_svas.svas -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
newvas(svas) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
new_svas - creating a new instance of a Shore Value-Added Server
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">ARGUMENTS</A>
</LI>
<LI>
<A HREF="#HRR.4">ENVIRONMENT</A>
</LI>
<LI>
<A HREF="#HRR.5">ERRORS</A>
</LI>
<LI>
<A HREF="#HRR.6">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.7">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.8">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.9">SEE ALSO</A>
</LI>
<LI>
<A HREF="#HRR.10">BUGS</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
// defines class shore_vas:
#include &lt;shore_vas.h&gt;

shore_vas       *new_svas(
    shore_vas             **result = NULL,
    const char            *host = NULL,
    int                   kbytes_shm_small = -1,
    int                   kbytes_shm_large = -1
);

bool
shore_svas::connected() const;
</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>
The function
 <strong>new_svas</strong>
creates a new instance of the 
<tt>class shore_vas</tt>
in an application's address space.
An application program does not invoke this directly;
the object cache does so.
<P>
The client library method
 <strong>connected</strong>
returns 
 <em>true</em>
if a connection is established with the server.
The server library method
attaches the client's transaction to the thread that
called the method, if the client is running a transaction.
It returns 
 <em>true</em>if<em>there</em>is<em>a</em>client<em>attached</em>to<em>this</em>thread<em>(which</em>
is almost always the case).
<HR>
<H1><A NAME="HRR.3">ARGUMENTS</A></H1>
 <em>Host</em>
is a string whose contents are
the name of the host on which the server runs.
 <em>Host</em>
may be a null pointer,
in which case the SVAS looks for a host name
in the option value for the option
<strong>svas_shost.</strong>
See
<A HREF="options.svas.html"><STRONG>options(svas)</STRONG></A>
for a list of applicable options.
Once a host name is found,
 <strong>new_svas</strong>
contacts the SVAS running on that host.
The server is expected to be listening on 
the port given by the option 
<strong>svas_port</strong>
or 
the default port, DEFAULT_PORT. 
DEFAULT_PORT is a compile-time constant.
<P>
The SVAS opens a TCP connection with the server,
authenticates the client process to the server,
and request that the server allocate shared memory
for message-passing according the the values of 
 <em>kbytes_shm_small</em>
and
 <em>kbytes_shm_large.</em>
 <em>Kbytes_shm_small</em>
indicates how many kilobytes of shared memory
to allocate for the transfer of small-object pages
(groups of small anonymous objects) between the server
and the client.
 <em>Kbytes_shm_large</em>
indicates how many kilobytes of shared memory
to allocate for the transfer of large-object pages
(parts of large objects) between the server
and the client.
If no value is given for either of these
arguments, their values are taken from
the options
<strong>svas_shm_small_obj</strong>
and
<strong>svas_shm_large_obj,</strong>
respectively.
<P>
If the server does not reside on the same machine as
the client (application process), shared memory is not
used.  
In this case, all data flow across the TCP connection.
<P>
If an error is encountered in any of these steps,
and
 <em>result</em>
is non-null,
 <em>*result</em>
will be a null pointer
on return from the function.
<HR>
<H1><A NAME="HRR.4">ENVIRONMENT</A></H1>
 <strong>New_vas</strong>
is not available on the server.
<P>
The environment variable SHORE_RC, if set,
must be the name
of  a configuration file containing values for the options.
If it is not set, 
the client library  uses the name
<tt>.svas_rc.</tt>
The library searches 
<tt>$HOME,</tt>
then the working directory
for a file with that name.
If such a file is found, it is read and its commands are
interpreted.
See
<A HREF="options.svas.html"><STRONG>options(svas)</STRONG></A>
for more information about options.
<HR>
<H1><A NAME="HRR.5">ERRORS</A></H1>
<P>
Should an error occur during the function
 <strong>new_svas,</strong>
information will be logged to the error log
for the client.
The error log is determined by the value of the
option
<strong>svas_log.</strong>
(The default is to log to the standard error file.)
See
<A HREF="options.svas.html"><STRONG>options(svas)</STRONG></A>
for more information about options.
<P>
A complete list of errors is in
<A HREF="errors.svas.html">errors(svas).</A>
<HR>
<H1><A NAME="HRR.6">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.7">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.8">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.9">SEE ALSO</A></H1>
<A HREF="errors.svas.html"><STRONG>errors(svas)</STRONG></A>,
<A HREF="options.svas.html"><STRONG>options(svas)</STRONG></A>,
and
<A HREF="intro.svas.html"><STRONG>intro(svas)</STRONG></A>.
<HR>
<H1><A NAME="HRR.10">BUGS</A></H1>
We need to describe how to create an instance of class svas_server 
(on the server side).
</BODY>
</HTML>
