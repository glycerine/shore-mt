<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:41:11 CST 1997 from file mansthread/smutex_t.sthread -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
smutex_t(sthread) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
smutex_t - Shore Mutex Class
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">ERRORS</A>
</LI>
<LI>
<A HREF="#HRR.4">EXAMPLES</A>
</LI>
<LI>
<A HREF="#HRR.5">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.6">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.7">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.8">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
#include &lt;sthread.h&gt;

/*
 *  Mutual Exclusion
 */
class smutex_t : public sthread_named_base_t {
public:
    NORET			smutex_t(const char* name = 0);
    NORET			~smutex_t();
    w_rc_t			acquire(int4_t timeout = WAIT_FOREVER);
    void			release();
    bool			is_mine() const;
    bool			is_locked() const;
};

</PRE></BLOCKQUOTE>

<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>

An application can use a mutex to protect a shared resource from
simultaneous access by multiple threads.  Mutexes are blocking
locks. Only one thread at a time is allowed to hold a mutex;
additional threads trying to acquire the mutex will block until the
mutex is free.

<P>
In order to access a shared resource, a thread must own the mutex that
is protecting the resource. Ownership is obtained by 
<em>acquiring</em>
the mutex. If another thread already owns the mutex, the requesting
thread is blocked. If the mutex is not owned, ownership is granted to
the requesting thread so it can access the shared resource. When a
thread is finished using the shared resource, it relinquish its
ownership of the mutex, thereby enabling another thread to gain
ownership.

<P>
<strong>smutex_t(name)</strong>
<DL>
<PP>
The constructor creates a mutex.  The
 <em>name</em>
parameter is stored in the mutex for debugging purposes.

<P>
</DL>
<strong>~smutex_t()</strong>
<DL>
<PP>
The destructor checks to make sure no thread holds the mutex.
If one does, it is a fatal error.

<P>
</DL>
<strong>acquire(timeout)</strong>
<DL>
<PP>
The
 <strong>acquire</strong>
method gives the current thread ownership of the mutex.
If the mutex is not owned, 
 <strong>acquire</strong>
sets its ownership and returns immediately with success. If the mutex
is already owned, the calling thread is blocked until either the
owning thread releases the mutex, or the specified 
 <em>timeout</em>
limit is reached.
<PP>
If more than one thread is blocked on the mutex, the thread with the
highest priority level is the first to be unblocked and given
ownership of the mutex. If more than 1 of the waiting threads have the
same priority, then FIFO ordering is used to determine which thread is
unblocked and given ownership.
<PP>
<em>Warning:</em>
a thread calling 
 <strong>acquire</strong>
twice in a row (i.e., without releasing
the mutex before the second acquire) will be blocked forever.

<P>
</DL>
<strong>release()</strong>
<DL>
<PP>
The
 <strong>release</strong>
method releases ownership of the mutex.

</DL>
<HR>
<H1><A NAME="HRR.3">ERRORS</A></H1>

TODO.

<HR>
<H1><A NAME="HRR.4">EXAMPLES</A></H1>

TODO.

<HR>
<H1><A NAME="HRR.5">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.6">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.7">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.8">SEE ALSO</A></H1>
<A HREF="errors.sthread.html"><STRONG>errors(sthread)</STRONG></A>,
<A HREF="sthread_t.sthread.html"><STRONG>sthread_t(sthread)</STRONG></A>,
<A HREF="scond_t.sthread.html"><STRONG>scond_t(sthread)</STRONG></A>,
<A HREF="sevsem_t.sthread.html"><STRONG>sevsem_t(sthread)</STRONG></A>,
<A HREF="file_handlers.sthread.html"><STRONG>file_handlers(sthread)</STRONG></A>,
<A HREF="intro.sthread.html"><STRONG>intro(sthread)</STRONG></A>.

</BODY>
</HTML>
