<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:41:14 CST 1997 from file manshore/smount.shore -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
smount(shore) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
smount, sumount - Mount or unmount a Shore file system as an NFS file
system
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">IMPORTANT NOTE</A>
</LI>
<LI>
<A HREF="#HRR.4">MOUNT</A>
</LI>
<LI>
<A HREF="#HRR.5">MOUNT OPTIONS</A>
</LI>
<LI>
<A HREF="#HRR.6">UMOUNT</A>
</LI>
<LI>
<A HREF="#HRR.7">UMOUNT OPTIONS</A>
</LI>
<LI>
<A HREF="#HRR.8">BUGS</A>
</LI>
<LI>
<A HREF="#HRR.9">AUTHOR</A>
</LI>
<LI>
<A HREF="#HRR.10">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.11">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.12">COPYRIGHT</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
smount [-rv] [-o options] host:path /path
 
sumount [-vflrm] [-p port] [host:]path
 
sumount [-vflrm] [-p port] host:path path
</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>
The Shore server is capable of acting as an NFS (Sun Network File System)
server, making a Shore file system appear to be a Unix file system.
A Shore file system (or any subtree of its directory hierarchy) may
be ``mounted'' into the namespace of any system that supports the client
side of the NFS protocol (which includes just about any flavor of Unix
these days, as well as many non-Unix systems).
To allow Shore to act as an NFS server on a host that also has a
standard NFS server, Shore listens on port 2999 (or any other port specified
in the configuration file) for NFS requests rather than
the standard port of 2049.
The standard Unix utility
<tt>mount(8)</tt>
on most systems has an option that allows you to specify a non-standard
port for NFS requests.
Unfortunately, this option only controls NFS requests
<em>per se ;</em>
NFS
 <strong>mount</strong>
and
 <strong>unmount</strong>
requests are still sent to the ``standard'' port.
The Shore distribution comes with patches for the some versions of
<tt>mount(8)</tt>
and
<tt>umount(8)</tt>
to add an option to control the port used for 
 <strong>mount</strong>
and
 <strong>unmount</strong>
requests, but for copyright reasons, only patches are included, not
the entire programs, so they are only useful to users who have access to
the source programs.
Moreover, these programs vary substantially among flavors of Unix, so
they must be separately patched for each system.
<P>
Shore also includes the programs
 <strong>smount</strong>
and
 <strong>sumount</strong>.
These programs have the advantage that they can be freely distributed under
the same terms as the rest of Shore, and since they are considerably simpler
than they vendor-supplied versions, they should be easier to port to
new systems.
However, they lack many of the bells and whistles of the vendor-supplied
versions, notably the ability to mount file system types other than
NFS or to mount more than one file system at a time.
<HR>
<H1><A NAME="HRR.3">IMPORTANT NOTE</A></H1>
On many systems, these commands may only be executed by the super-user,
since the
<tt>mount(2)</tt>
and
<tt>unmount(2)</tt>
system calls are privileged.
<HR>
<H1><A NAME="HRR.4">MOUNT</A></H1>
There must be exactly two non-option arguments.
The first argument must have the form
<BLOCKQUOTE><PRE>
	host:remote_path
</PRE></BLOCKQUOTE>
where
<em>host</em>
is the name of a host where a Shore server is running (``localhost'' is
always acceptable) and
<em>remote_path</em>
is a pathname relative to the database (that is, 
relative to the root directory of the root volume)
served by that server.
<P>
The second argument is the absolute pathname
<BLOCKQUOTE><PRE>
	local_path
</PRE></BLOCKQUOTE>
of a node (usually an empty directory) on the local file system.
If the request is successful,
<em>local_path</em>
becomes an alias for the node named by
<em>remote_path</em>
in the database served by the indicated server.
<HR>
<H1><A NAME="HRR.5">MOUNT OPTIONS</A></H1>
<DL>
<DT>-r</DT><DD>
Mount the specified database as a read-only file system.
</DD>
<DT>-v</DT><DD>
Verbose.
Indicate exactly what is being done.
</DD>
<DT>-o options</DT><DD>
Specify a variety of system-specific options, such as buffer sizes and
timeouts.
The exact options available depend on the host operating system.
See
<tt>mount(8)</tt>
for a description.
In general, all options relevant to NFS are supported, as well as one
additional option:
 <em>mport=nnnn</em>,
where
<em>nnnn</em>
is the port number (in decimal) where mount and unmount request packets
should be sent.
The default is compiled into the program (currently 2999).

</DD>
</DL>
<HR>
<H1><A NAME="HRR.6">UMOUNT</A></H1>
Either one or two non-option arguments may be supplied.
If two arguments are supplied, they should match the arguments to a
corresponding call of
 <strong>smount.</strong>
If only one argument is given, it is interpreted as matching the first or
second argument of
 <strong>smount,</strong>
depending on whether it contains a colon.
The other argument is reconstructed, if possible, from data stored by
 <strong>smount.</strong>
For example, under SunOS,
<tt>mount(8)</tt>
(and hence
 <strong>smount</strong>)
records its parameters in
<tt>/etc/mtab.</tt>
<P>
 <strong>Sh_umount</strong>
performs three operations (in this order):
it uses a local system call to remove the mount point,
it sends an NFS unmount request to the server to tell it that the mount
association is removed, and it updates
<tt>/etc/mtab</tt>
to remove the information.
Normally, if any operation fails, subsequent ones are skipped as well.
(Note: 
The standard /etc/umount will probably work ok except that the second
step (sending a message to the mountd server) will send the message to
the wrong place.
Since most mountd servers do a slipshod job of keeping track of who's got
what mounted anyhow, you may not notice any difference).
<HR>
<H1><A NAME="HRR.7">UMOUNT OPTIONS</A></H1>
<DL>
<DT>-v</DT><DD>
Verbose.
Indicate exactly what is being done.
</DD>
<DT>-f</DT><DD>
Force the unmount, even if
<tt>/etc/mtab</tt>
does not indicate any matching mount.
With this option, both arguments must be specified.
</DD>
<DT>-i</DT><DD>
Ignore errors;
try to perform all three actions even if some of them fail.
</DD>
<DT>-l</DT><DD>
Do
<strong>not</strong>
execute the (local)
<tt>unmount(2)</tt>
system call.
</DD>
<DT>-r</DT><DD>
Do
<strong>not</strong>
send the NFS unmount request to the remote Shore server.
</DD>
<DT>-m</DT><DD>
Do
<strong>not</strong>
update
<tt>/etc/mtab</tt>
(or whatever).
</DD>
<DT>-p port</DT><DD>
Specify a port to use in contacting the server.
If this option is omitted,
 <strong>sumount</strong>
uses the value specified in the corresponding
 <strong>smount,</strong>
if that value was recored in
<tt>/etc/mtab ,</tt>
and otherwise, a compiled-in default (2999).
</DD>
</DL>
<HR>
<H1><A NAME="HRR.8">BUGS</A></H1>
These programs only handle file systems of type NFS.
In particular, they cannot do local mounts or mounts of other file system
types supported on various systems.
<P>
Many features commonly provided by the standard
<tt>/etc/mount</tt>
are not supported.
In particular, the 
<strong>-a</strong>
option (mount all file system listed in a standard
place, such as 
<tt>/etc/fstab</tt>
) is not supported , nor is any other usage that
attempts to mount more than one file system in one call.
<HR>
<H1><A NAME="HRR.9">AUTHOR</A></H1>
Marvin Solomon (solomon@cs.wisc.edu)
<HR>
<H1><A NAME="HRR.10">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.11">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.12">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
</BODY>
</HTML>
