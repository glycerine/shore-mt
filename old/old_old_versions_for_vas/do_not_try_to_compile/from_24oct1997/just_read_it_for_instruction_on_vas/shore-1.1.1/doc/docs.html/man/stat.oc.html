<!-- Warning: Do not edit this file. -->
<!-- It was created automatically by yam2html.pl 1.3  -->
<!-- on Mon Oct 27 09:40:57 CST 1997 from file manoc/stat.oc -->
<!DOCTYPE HTML public "-//W3C//DTD HTML 3.2//EN">
<HTML>
<HEAD>
<TITLE>
stat(oc) -- Shore Reference Manual
</TITLE>
<LINK REV="made" HREF="mailto:solomon@cs.wisc.edu">
</HEAD>

<BODY>

<!-- .so tmac.man.local -->
<H1><A NAME="HRR.0">
stat - retrieve information about an object
</A></H1><HR>
<H1>
CONTENTS
</H1>
<UL>
<LI>
<A HREF="#HRR.1">SYNOPSIS</A>
</LI>
<LI>
<A HREF="#HRR.2">DESCRIPTION</A>
</LI>
<LI>
<A HREF="#HRR.3">BUGS</A>
</LI>
<LI>
<A HREF="#HRR.4">VERSION</A>
</LI>
<LI>
<A HREF="#HRR.5">SPONSORSHIP</A>
</LI>
<LI>
<A HREF="#HRR.6">COPYRIGHT</A>
</LI>
<LI>
<A HREF="#HRR.7">SEE ALSO</A>
</LI></UL><HR>
<H1><A NAME="HRR.1">SYNOPSIS</A></H1>
<BLOCKQUOTE><PRE>
<TT>#include &lt;ShoreApp.h&gt;</TT>
shrc Shore::stat(const char *path, OStat *osp);
</PRE></BLOCKQUOTE>
<HR>
<H1><A NAME="HRR.2">DESCRIPTION</A></H1>
The
 <strong>stat</strong>
method retrieves information about the object indicated by
 <em>path,</em>
and fills in the structure given by
 <em>osp.</em>
If
 <em>path</em>
specifies a symbolic link or a cross-reference, this method will
retrieve information about the object referenced by the link or 
cross-reference, not the link or cross-reference object.  
An alternate way of retrieving this information for an object
of a known type is through the language binding (see
<A HREF="ref.cxxlb.html"><STRONG>ref(cxxlb)</STRONG></A>
).
<P>
The 
 <em>OStat</em>
structure, defined in OCTypes.h, actually consists of three
types.  
 <em>OStat</em>
contains some fields that are valid for all objects,
registered or anonymous.  
AnonStat has fields that are valid only for
anonymous objects, and RegStat has fields that are valid only for
registered objects.  The
 <em>kind</em>
field of 
 <em>OStat</em>
indicates whether an object is registered or anonymous.  
The structures are defined as follows:
<BLOCKQUOTE><PRE>
struct AnonStat
{
    LOID pool;          // loid of pool in which obj resides
};

struct RegStat
{
    short nlink;        // num. dir. entries pointing to object
    mode_t mode;        // permissions flags
    uid_t uid;          // owner
    gid_t gid;          // group
    time_t atime;       // access time
    time_t mtime;       // modify time
    time_t ctime;       // props change time
};

struct OStat
{
    LOID loid;          // object's logical oid
    LOID type_loid;     // loid of object's type object
    ObjectSize csize;   // core size
    ObjectSize hsize;   // heap size
    int nindices;       // number of indices in object
    ObjectKind kind;    // KindRegistered or KindAnonymous
    AnonStat astat;     // if kind == KindAnonymous
    RegStat  rstat;     // if kind == KindRegistered
};
</PRE></BLOCKQUOTE>
The values of the
 <em>kind</em>
field are defined in vas_types.h.  Although five values are defined in that
file, only two of those values (KindRegistered and KindAnonymous) can be
found in the
 <em>kind</em>
field in the current implementation.
<P>
 <strong>Stat</strong>
obtains a SH-mode (share-mode) lock on the object.
<HR>
<H1><A NAME="HRR.3">BUGS</A></H1>
Changes to the heap size of an object
that occurred during the current transaction might 
not be reflected immediately in the
 <em>hsize</em>
field of the OStat structure.  Typically, the reported value of
 <em>hsize</em>
will be zero for objects created within the transaction.  
For objects created in earlier transactions, the reported 
heap size will typically be last committed value.
<HR>
<H1><A NAME="HRR.4">VERSION</A></H1>
This manual page applies to Version 1.1.1 of the Shore software.
<HR>
<H1><A NAME="HRR.5">SPONSORSHIP</A></H1>
The Shore project is sponsored by the Advanced Research Project Agency, ARPA
order number 018 (formerly 8230), monitored by the U.S. Army Research
Laboratory under contract DAAB07-91-C-Q518.
<HR>
<H1><A NAME="HRR.6">COPYRIGHT</A></H1>
Copyright &#169; 1994, 1995, 1996, 1997,
Computer Sciences Department, University of
Wisconsin -- Madison. All Rights Reserved.
<HR>
<H1><A NAME="HRR.7">SEE ALSO</A></H1>
<A HREF="ostat.cxxlb.html"><STRONG>ostat(cxxlb)</STRONG></A>.
</BODY>
</HTML>
